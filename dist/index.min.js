!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).TranslationWidget=e()}(this,(function(){"use strict";var t=Object.defineProperty,e=(e,i,n)=>((e,i,n)=>i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n)(e,"symbol"!=typeof i?i+"":i,n);class i{constructor(t){e(this,"publicKey"),e(this,"cacheMetrics",{hits:0,misses:0}),e(this,"apiUrl","https://api.jigsawstack.com/v1/ai/translate"),this.publicKey=t}getCacheMetrics(){return{...this.cacheMetrics}}async translateBatchText(t,e,i=2,n=100){let a=0;for(;a<i;)try{const i=await fetch(this.apiUrl,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.publicKey},body:JSON.stringify({text:t,target_language:e})});if(!i.ok){const t=new Error(`Error translating text: ${i.statusText}`);throw t.status=i.status,t.response=i,t}const n=await i.json();return Array.isArray(n.translated_text)?n.translated_text:[n.translated_text]}catch(s){if(a++,a>=i)return console.error("Translation error after retries:",s),t;await new Promise((t=>setTimeout(t,n)))}return t}}const n=[{code:"af",name:"Afrikaans",native:"Afrikaans",writing_system:"Latin"},{code:"am",name:"Amharic",native:"አማርኛ",writing_system:"Ethiopic"},{code:"ar",name:"Arabic",native:"العربية",rtl:1,writing_system:"Arabic"},{code:"as",name:"Assamese",native:"অসমীয়া",writing_system:"Bengali"},{code:"az",name:"Azerbaijani",native:"Azərbaycanca / آذربايجان",writing_system:"Latin"},{code:"ba",name:"Bashkir",native:"Башҡорт",writing_system:"Cyrillic"},{code:"be",name:"Belarusian",native:"Беларуская",writing_system:"Cyrillic"},{code:"bg",name:"Bulgarian",native:"Български",writing_system:"Cyrillic"},{code:"bn",name:"Bengali",native:"বাংলা",writing_system:"Bengali"},{code:"bo",name:"Tibetan",native:"བོད་ཡིག / Bod skad",writing_system:"Tibetan"},{code:"br",name:"Breton",native:"Brezhoneg",writing_system:"Latin"},{code:"bs",name:"Bosnian",native:"Bosanski",writing_system:"Latin"},{code:"ca",name:"Catalan",native:"Català",writing_system:"Latin"},{code:"ch",name:"Chamorro",native:"Chamoru",writing_system:"Latin"},{code:"co",name:"Corsican",native:"Corsu",writing_system:"Latin"},{code:"cs",name:"Czech",native:"Česky",writing_system:"Latin"},{code:"cy",name:"Welsh",native:"Cymraeg",writing_system:"Latin"},{code:"da",name:"Danish",native:"Dansk",writing_system:"Latin"},{code:"de",name:"German",native:"Deutsch",writing_system:"Latin"},{code:"dv",name:"Divehi",native:"ދިވެހިބަސް",rtl:1,writing_system:"Thaana"},{code:"dz",name:"Dzongkha",native:"ཇོང་ཁ",writing_system:"Tibetan"},{code:"el",name:"Greek",native:"Ελληνικά",writing_system:"Greek"},{code:"en",name:"English",native:"English",writing_system:"Latin"},{code:"eo",name:"Esperanto",native:"Esperanto",writing_system:"Latin"},{code:"es",name:"Spanish",native:"Español",writing_system:"Latin"},{code:"et",name:"Estonian",native:"Eesti",writing_system:"Latin"},{code:"eu",name:"Basque",native:"Euskara",writing_system:"Latin"},{code:"fa",name:"Persian",native:"فارسی",rtl:1,writing_system:"Arabic"},{code:"ff",name:"Peul",native:"Fulfulde",writing_system:"Latin"},{code:"fi",name:"Finnish",native:"Suomi",writing_system:"Latin"},{code:"fj",name:"Fijian",native:"Na Vosa Vakaviti",writing_system:"Latin"},{code:"fo",name:"Faroese",native:"Føroyskt",writing_system:"Latin"},{code:"fr",name:"French",native:"Français",writing_system:"Latin"},{code:"fy",name:"West Frisian",native:"Frysk",writing_system:"Latin"},{code:"ga",name:"Irish",native:"Gaeilge",writing_system:"Latin"},{code:"gd",name:"Scottish Gaelic",native:"Gàidhlig",writing_system:"Latin"},{code:"gl",name:"Galician",native:"Galego",writing_system:"Latin"},{code:"gn",name:"Guarani",native:"Avañe'ẽ",writing_system:"Latin"},{code:"gu",name:"Gujarati",native:"ગુજરાતી",writing_system:"Gujarati"},{code:"gv",name:"Manx",native:"Gaelg",writing_system:"Latin"},{code:"ha",name:"Hausa",native:"هَوُسَ",rtl:1,writing_system:"Latin"},{code:"he",name:"Hebrew",native:"עברית",rtl:1,writing_system:"Hebrew"},{code:"hi",name:"Hindi",native:"हिन्दी",writing_system:"Devanagari"},{code:"hr",name:"Croatian",native:"Hrvatski",writing_system:"Latin"},{code:"ht",name:"Haitian",native:"Krèyol ayisyen",writing_system:"Latin"},{code:"hu",name:"Hungarian",native:"Magyar",writing_system:"Latin"},{code:"hy",name:"Armenian",native:"Հայերեն",writing_system:"Armenian"},{code:"id",name:"Indonesian",native:"Bahasa Indonesia",writing_system:"Latin"},{code:"ig",name:"Igbo",native:"Igbo",writing_system:"Latin"},{code:"is",name:"Icelandic",native:"Íslenska",writing_system:"Latin"},{code:"it",name:"Italian",native:"Italiano",writing_system:"Latin"},{code:"iu",name:"Inuktitut",native:"ᐃᓄᒃᑎᑐᑦ",writing_system:"Unified Canadian Aboriginal Syllabics"},{code:"ja",name:"Japanese",native:"日本語",writing_system:"Japanese"},{code:"jv",name:"Javanese",native:"Basa Jawa",writing_system:"Javanese"},{code:"ka",name:"Georgian",native:"ქართული",writing_system:"Georgian"},{code:"kg",name:"Kongo",native:"KiKongo",writing_system:"Latin"},{code:"ki",name:"Kikuyu",native:"Gĩkũyũ",writing_system:"Latin"},{code:"kj",name:"Kuanyama",native:"Kuanyama",writing_system:"Latin"},{code:"kk",name:"Kazakh",native:"Қазақша",writing_system:"Cyrillic"},{code:"kl",name:"Greenlandic",native:"Kalaallisut",writing_system:"Latin"},{code:"km",name:"Cambodian",native:"ភាសាខ្មែរ",writing_system:"Khmer"},{code:"kn",name:"Kannada",native:"ಕನ್ನಡ",writing_system:"Kannada"},{code:"ko",name:"Korean",native:"한국어",writing_system:"Korean"},{code:"kr",name:"Kanuri",native:"Kanuri",writing_system:"Latin"},{code:"ks",name:"Kashmiri",native:"कश्मीरी / كشميري",rtl:1,writing_system:"Arabic"},{code:"ku",name:"Kurdish",native:"Kurdî / كوردی",rtl:1,writing_system:"Arabic"},{code:"kv",name:"Komi",native:"Коми",writing_system:"Cyrillic"},{code:"kw",name:"Cornish",native:"Kernewek",writing_system:"Latin"},{code:"ky",name:"Kirghiz",native:"Kırgızca / Кыргызча",writing_system:"Cyrillic"},{code:"la",name:"Latin",native:"Latina",writing_system:"Latin"},{code:"lb",name:"Luxembourgish",native:"Lëtzebuergesch",writing_system:"Latin"},{code:"lg",name:"Ganda",native:"Luganda",writing_system:"Latin"},{code:"li",name:"Limburgian",native:"Limburgs",writing_system:"Latin"},{code:"ln",name:"Lingala",native:"Lingála",writing_system:"Latin"},{code:"lo",name:"Laotian",native:"ລາວ / Pha xa lao",writing_system:"Lao"},{code:"lt",name:"Lithuanian",native:"Lietuvių",writing_system:"Latin"},{code:"lu",name:"Luba-Katanga",native:"Tshiluba",writing_system:"Latin"},{code:"lv",name:"Latvian",native:"Latviešu",writing_system:"Latin"},{code:"mg",name:"Malagasy",native:"Malagasy",writing_system:"Latin"},{code:"mh",name:"Marshallese",native:"Kajin Majel / Ebon",writing_system:"Latin"},{code:"mi",name:"Maori",native:"Māori",writing_system:"Latin"},{code:"mk",name:"Macedonian",native:"Македонски",writing_system:"Cyrillic"},{code:"ml",name:"Malayalam",native:"മലയാളം",writing_system:"Malayalam"},{code:"mn",name:"Mongolian",native:"Монгол",writing_system:"Mongolian"},{code:"mo",name:"Moldovan",native:"Moldovenească",writing_system:"Latin"},{code:"mr",name:"Marathi",native:"मराठी",writing_system:"Devanagari"},{code:"ms",name:"Malay",native:"Bahasa Melayu",writing_system:"Latin"},{code:"mt",name:"Maltese",native:"bil-Malti",writing_system:"Latin"},{code:"my",name:"Burmese",native:"မြန်မာစာ",writing_system:"Myanmar"},{code:"na",name:"Nauruan",native:"Dorerin Naoero",writing_system:"Latin"},{code:"nb",name:"Norwegian Bokmål",native:"Norsk bokmål",writing_system:"Latin"},{code:"nd",name:"North Ndebele",native:"Sindebele",writing_system:"Latin"},{code:"ne",name:"Nepali",native:"नेपाली",writing_system:"Devanagari"},{code:"ng",name:"Ndonga",native:"Oshiwambo",writing_system:"Latin"},{code:"nl",name:"Dutch",native:"Nederlands",writing_system:"Latin"},{code:"nn",name:"Norwegian Nynorsk",native:"Norsk nynorsk",writing_system:"Latin"},{code:"no",name:"Norwegian",native:"Norsk",writing_system:"Latin"},{code:"nr",name:"South Ndebele",native:"isiNdebele",writing_system:"Latin"},{code:"nv",name:"Navajo",native:"Diné bizaad",writing_system:"Latin"},{code:"ny",name:"Chichewa",native:"Chi-Chewa",writing_system:"Latin"},{code:"oc",name:"Occitan",native:"Occitan",writing_system:"Latin"},{code:"oj",name:"Ojibwa",native:"ᐊᓂᔑᓈᐯᒧᐎᓐ / Anishinaabemowin",writing_system:"Unified Canadian Aboriginal Syllabics"},{code:"om",name:"Oromo",native:"Oromoo",writing_system:"Latin"},{code:"or",name:"Oriya",native:"ଓଡ଼ିଆ",writing_system:"Odia"},{code:"os",name:"Ossetian / Ossetic",native:"Иронау",writing_system:"Cyrillic"},{code:"pa",name:"Panjabi / Punjabi",native:"ਪੰਜਾਬੀ / पंजाबी / پنجابي",writing_system:"Gurmukhi"},{code:"pi",name:"Pali",native:"Pāli / पाऴि",writing_system:"Devanagari"},{code:"pl",name:"Polish",native:"Polski",writing_system:"Latin"},{code:"ps",name:"Pashto",native:"پښتو",rtl:1,writing_system:"Arabic"},{code:"pt",name:"Portuguese",native:"Português",writing_system:"Latin"},{code:"qu",name:"Quechua",native:"Runa Simi",writing_system:"Latin"},{code:"rm",name:"Raeto Romance",native:"Rumantsch",writing_system:"Latin"},{code:"rn",name:"Kirundi",native:"Kirundi",writing_system:"Latin"},{code:"ro",name:"Romanian",native:"Română",writing_system:"Latin"},{code:"ru",name:"Russian",native:"Русский",writing_system:"Cyrillic"},{code:"rw",name:"Rwandi",native:"Kinyarwandi",writing_system:"Latin"},{code:"sa",name:"Sanskrit",native:"संस्कृतम्",writing_system:"Devanagari"},{code:"sc",name:"Sardinian",native:"Sardu",writing_system:"Latin"},{code:"sd",name:"Sindhi",native:"सिनधि",writing_system:"Arabic"},{code:"se",name:"Northern Sami",native:"Sámegiella",writing_system:"Latin"},{code:"sg",name:"Sango",native:"Sängö",writing_system:"Latin"},{code:"sh",name:"Serbo-Croatian",native:"Srpskohrvatski / Српскохрватски",writing_system:"Latin"},{code:"si",name:"Sinhalese",native:"සිංහල",writing_system:"Sinhala"},{code:"sk",name:"Slovak",native:"Slovenčina",writing_system:"Latin"},{code:"sl",name:"Slovenian",native:"Slovenščina",writing_system:"Latin"},{code:"sm",name:"Samoan",native:"Gagana Samoa",writing_system:"Latin"},{code:"sn",name:"Shona",native:"chiShona",writing_system:"Latin"},{code:"so",name:"Somalia",native:"Soomaaliga",writing_system:"Latin"},{code:"sq",name:"Albanian",native:"Shqip",writing_system:"Latin"},{code:"sr",name:"Serbian",native:"Српски",writing_system:"Cyrillic"},{code:"ss",name:"Swati",native:"SiSwati",writing_system:"Latin"},{code:"st",name:"Southern Sotho",native:"Sesotho",writing_system:"Latin"},{code:"su",name:"Sundanese",native:"Basa Sunda",writing_system:"Sundanese"},{code:"sv",name:"Swedish",native:"Svenska",writing_system:"Latin"},{code:"sw",name:"Swahili",native:"Kiswahili",writing_system:"Latin"},{code:"ta",name:"Tamil",native:"தமிழ்",writing_system:"Tamil"},{code:"te",name:"Telugu",native:"తెలుగు",writing_system:"Telugu"},{code:"tg",name:"Tajik",native:"Тоҷикӣ",writing_system:"Cyrillic"},{code:"th",name:"Thai",native:"ไทย / Phasa Thai",writing_system:"Thai"},{code:"ti",name:"Tigrinya",native:"ትግርኛ",writing_system:"Ethiopic"},{code:"tk",name:"Turkmen",native:"Туркмен / تركمن",writing_system:"Latin"},{code:"tl",name:"Tagalog / Filipino",native:"Tagalog",writing_system:"Latin"},{code:"tn",name:"Tswana",native:"Setswana",writing_system:"Latin"},{code:"to",name:"Tonga",native:"Lea Faka-Tonga",writing_system:"Latin"},{code:"tr",name:"Turkish",native:"Türkçe",writing_system:"Latin"},{code:"ts",name:"Tsonga",native:"Xitsonga",writing_system:"Latin"},{code:"tt",name:"Tatar",native:"Tatarça",writing_system:"Cyrillic"},{code:"tw",name:"Twi",native:"Twi",writing_system:"Latin"},{code:"ty",name:"Tahitian",native:"Reo Mā`ohi",writing_system:"Latin"},{code:"ug",name:"Uyghur",native:"Uyƣurqə / ئۇيغۇرچە",writing_system:"Arabic"},{code:"uk",name:"Ukrainian",native:"Українська",writing_system:"Cyrillic"},{code:"ur",name:"Urdu",native:"اردو",rtl:1,writing_system:"Arabic"},{code:"uz",name:"Uzbek",native:"Ўзбек",writing_system:"Latin"},{code:"ve",name:"Venda",native:"Tshivenḓa",writing_system:"Latin"},{code:"vi",name:"Vietnamese",native:"Tiếng Việt",writing_system:"Latin"},{code:"vo",name:"Volapük",native:"Volapük",writing_system:"Latin"},{code:"wo",name:"Wolof",native:"Wollof",writing_system:"Latin"},{code:"xh",name:"Xhosa",native:"isiXhosa",writing_system:"Latin"},{code:"yi",name:"Yiddish",native:"ייִדיש",rtl:1,writing_system:"Hebrew"},{code:"yo",name:"Yoruba",native:"Yorùbá",writing_system:"Latin"},{code:"zh",name:"Chinese (Simplified)",native:"简体中文",writing_system:"Simplied Han"},{code:"zh-TW",name:"Chinese (Traditional)",native:"繁體中文",writing_system:"Traditional Han"},{code:"zu",name:"Zulu",native:"isiZulu",writing_system:"Latin"}];function a(t){return function(t,e){let i=3&t.length,n=t.length-i,a=e,s=3432918353,r=461845907,o=0;for(;o<n;){let e=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24;++o,e=(65535&e)*s+(((e>>>16)*s&65535)<<16)&4294967295,e=e<<15|e>>>17,e=(65535&e)*r+(((e>>>16)*r&65535)<<16)&4294967295,a^=e,a=a<<13|a>>>19;const i=5*(65535&a)+((5*(a>>>16)&65535)<<16)&4294967295;a=27492+(65535&i)+((58964+(i>>>16)&65535)<<16)}let l=0;switch(i){case 3:l^=t.charCodeAt(o+2)<<16;case 2:l^=t.charCodeAt(o+1)<<8;case 1:l^=t.charCodeAt(o),l=(65535&l)*s+(((l>>>16)*s&65535)<<16)&4294967295,l=l<<15|l>>>17,l=(65535&l)*r+(((l>>>16)*r&65535)<<16)&4294967295,a^=l}return a^=t.length,a^=a>>>16,a=2246822507*(65535&a)+((2246822507*(a>>>16)&65535)<<16)&4294967295,a^=a>>>13,a=3266489909*(65535&a)+((3266489909*(a>>>16)&65535)<<16)&4294967295,a^=a>>>16,a>>>0}(t.map((t=>{var e,i;if(t.nodeType===Node.TEXT_NODE){const n=t.parentElement;return n&&n.hasAttribute("data-original-text")?null==(e=n.getAttribute("data-original-text"))?void 0:e.replace(/\s+/g," ").trim():null==(i=t.textContent)?void 0:i.replace(/\s+/g," ").trim().toLocaleLowerCase()}})).join(" ").trim().toLowerCase(),42).toString(16)}const s=t=>t.replace(/[\p{Emoji_Presentation}\p{Extended_Pictographic}]/gu,"");class r{static findTranslatableContent(){var t;if("undefined"==typeof window)return[];const e={acceptNode(t){var e;if(t.nodeType!==Node.TEXT_NODE)return NodeFilter.FILTER_REJECT;const i=t.parentElement;if(!i)return NodeFilter.FILTER_REJECT;if(i.closest('[aria-hidden="true"]'))return NodeFilter.FILTER_REJECT;if(i.classList.contains("sr-only"))return NodeFilter.FILTER_REJECT;return null!==i.closest("script, style, code")||null!==i.closest("next-route-announcer")||null!==i.closest(".jigts-translation-widget")||null!==i.closest(".jigts-widget-trigger")||null!==i.closest(".jigts-widget-dropdown")||null!==i.closest(".notranslate")||!(null==(e=t.textContent)?void 0:e.trim())?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}},i=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,e),n=[];let a;for(;a=i.nextNode();)if(a.nodeType===Node.TEXT_NODE){let e=(null==(t=a.textContent)?void 0:t.trim())||"";const i=a.parentElement;if(i){const t=i.getAttribute("data-original-text");t&&(e=t)}const r=s(e);if(0===e.length||1===e.length||0===r.length)continue;n.push(a)}return n}static divideIntoGroups(t,e){const i=[];for(let n=0;n<t.length;n+=e)i.push(t.slice(n,n+e));return i}static containsTranslatableContent(t){var e;if(t.nodeType!==Node.TEXT_NODE)return!1;const i=t.parentElement;return!!i&&!("SCRIPT"===i.tagName||"STYLE"===i.tagName||"CODE"===i.tagName||"next-route-announcer"===i.tagName||i.closest(".translate-widget")||i.closest(".notranslate")||!(null==(e=t.textContent)?void 0:e.trim()))}static getContainer(t){return t.parentElement}}const o={pageLanguage:"en",autoDetectLanguage:!1,position:"top-right"};function l(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var g,c,d,u={exports:{}};const m=l((g||(g=1,c=u,d=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function a(t,e){if(!n[t]){n[t]={};for(var i=0;i<t.length;i++)n[t][t.charAt(i)]=i}return n[t][e]}var s={compressToBase64:function(t){if(null==t)return"";var i=s._compress(t,6,(function(t){return e.charAt(t)}));switch(i.length%4){default:case 0:return i;case 1:return i+"===";case 2:return i+"==";case 3:return i+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:s._decompress(t.length,32,(function(i){return a(e,t.charAt(i))}))},compressToUTF16:function(e){return null==e?"":s._compress(e,15,(function(e){return t(e+32)}))+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:s._decompress(t.length,16384,(function(e){return t.charCodeAt(e)-32}))},compressToUint8Array:function(t){for(var e=s.compress(t),i=new Uint8Array(2*e.length),n=0,a=e.length;n<a;n++){var r=e.charCodeAt(n);i[2*n]=r>>>8,i[2*n+1]=r%256}return i},decompressFromUint8Array:function(e){if(null==e)return s.decompress(e);for(var i=new Array(e.length/2),n=0,a=i.length;n<a;n++)i[n]=256*e[2*n]+e[2*n+1];var r=[];return i.forEach((function(e){r.push(t(e))})),s.decompress(r.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":s._compress(t,6,(function(t){return i.charAt(t)}))},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),s._decompress(t.length,32,(function(e){return a(i,t.charAt(e))})))},compress:function(e){return s._compress(e,16,(function(e){return t(e)}))},_compress:function(t,e,i){if(null==t)return"";var n,a,s,r={},o={},l="",g="",c="",d=2,u=3,m=2,h=[],p=0,v=0;for(s=0;s<t.length;s+=1)if(l=t.charAt(s),Object.prototype.hasOwnProperty.call(r,l)||(r[l]=u++,o[l]=!0),g=c+l,Object.prototype.hasOwnProperty.call(r,g))c=g;else{if(Object.prototype.hasOwnProperty.call(o,c)){if(c.charCodeAt(0)<256){for(n=0;n<m;n++)p<<=1,v==e-1?(v=0,h.push(i(p)),p=0):v++;for(a=c.charCodeAt(0),n=0;n<8;n++)p=p<<1|1&a,v==e-1?(v=0,h.push(i(p)),p=0):v++,a>>=1}else{for(a=1,n=0;n<m;n++)p=p<<1|a,v==e-1?(v=0,h.push(i(p)),p=0):v++,a=0;for(a=c.charCodeAt(0),n=0;n<16;n++)p=p<<1|1&a,v==e-1?(v=0,h.push(i(p)),p=0):v++,a>>=1}0==--d&&(d=Math.pow(2,m),m++),delete o[c]}else for(a=r[c],n=0;n<m;n++)p=p<<1|1&a,v==e-1?(v=0,h.push(i(p)),p=0):v++,a>>=1;0==--d&&(d=Math.pow(2,m),m++),r[g]=u++,c=String(l)}if(""!==c){if(Object.prototype.hasOwnProperty.call(o,c)){if(c.charCodeAt(0)<256){for(n=0;n<m;n++)p<<=1,v==e-1?(v=0,h.push(i(p)),p=0):v++;for(a=c.charCodeAt(0),n=0;n<8;n++)p=p<<1|1&a,v==e-1?(v=0,h.push(i(p)),p=0):v++,a>>=1}else{for(a=1,n=0;n<m;n++)p=p<<1|a,v==e-1?(v=0,h.push(i(p)),p=0):v++,a=0;for(a=c.charCodeAt(0),n=0;n<16;n++)p=p<<1|1&a,v==e-1?(v=0,h.push(i(p)),p=0):v++,a>>=1}0==--d&&(d=Math.pow(2,m),m++),delete o[c]}else for(a=r[c],n=0;n<m;n++)p=p<<1|1&a,v==e-1?(v=0,h.push(i(p)),p=0):v++,a>>=1;0==--d&&(d=Math.pow(2,m),m++)}for(a=2,n=0;n<m;n++)p=p<<1|1&a,v==e-1?(v=0,h.push(i(p)),p=0):v++,a>>=1;for(;;){if(p<<=1,v==e-1){h.push(i(p));break}v++}return h.join("")},decompress:function(t){return null==t?"":""==t?null:s._decompress(t.length,32768,(function(e){return t.charCodeAt(e)}))},_decompress:function(e,i,n){var a,s,r,o,l,g,c,d=[],u=4,m=4,h=3,p="",v=[],w={val:n(0),position:i,index:1};for(a=0;a<3;a+=1)d[a]=a;for(r=0,l=Math.pow(2,2),g=1;g!=l;)o=w.val&w.position,w.position>>=1,0==w.position&&(w.position=i,w.val=n(w.index++)),r|=(o>0?1:0)*g,g<<=1;switch(r){case 0:for(r=0,l=Math.pow(2,8),g=1;g!=l;)o=w.val&w.position,w.position>>=1,0==w.position&&(w.position=i,w.val=n(w.index++)),r|=(o>0?1:0)*g,g<<=1;c=t(r);break;case 1:for(r=0,l=Math.pow(2,16),g=1;g!=l;)o=w.val&w.position,w.position>>=1,0==w.position&&(w.position=i,w.val=n(w.index++)),r|=(o>0?1:0)*g,g<<=1;c=t(r);break;case 2:return""}for(d[3]=c,s=c,v.push(c);;){if(w.index>e)return"";for(r=0,l=Math.pow(2,h),g=1;g!=l;)o=w.val&w.position,w.position>>=1,0==w.position&&(w.position=i,w.val=n(w.index++)),r|=(o>0?1:0)*g,g<<=1;switch(c=r){case 0:for(r=0,l=Math.pow(2,8),g=1;g!=l;)o=w.val&w.position,w.position>>=1,0==w.position&&(w.position=i,w.val=n(w.index++)),r|=(o>0?1:0)*g,g<<=1;d[m++]=t(r),c=m-1,u--;break;case 1:for(r=0,l=Math.pow(2,16),g=1;g!=l;)o=w.val&w.position,w.position>>=1,0==w.position&&(w.position=i,w.val=n(w.index++)),r|=(o>0?1:0)*g,g<<=1;d[m++]=t(r),c=m-1,u--;break;case 2:return v.join("")}if(0==u&&(u=Math.pow(2,h),h++),d[c])p=d[c];else{if(c!==m)return null;p=s+s.charAt(0)}v.push(p),d[m++]=s+p.charAt(0),s=p,0==--u&&(u=Math.pow(2,h),h++)}}};return s}(),null!=c?c.exports=d:"undefined"!=typeof angular&&null!=angular&&angular.module("LZString",[]).factory("LZString",(function(){return d}))),u.exports));class h{constructor(t=""){e(this,"prefix"),e(this,"COMPRESSION_THRESHOLD",1e4),e(this,"COMPRESSION_MARKER","__COMPRESSED__"),this.prefix=t}getKey(t,e,i){const n=e.split("?")[0];return`${t}-${encodeURIComponent(n)}-${i}`}shouldCompress(t){return t.length>this.COMPRESSION_THRESHOLD}compress(t){try{return m.compressToBase64(t)}catch(e){return console.error("Compression failed:",e),t}}decompress(t){try{return m.decompressFromBase64(t)||t}catch(e){return console.error("Decompression failed:",e),t}}getItem(t){const e=this.prefix+t,i=localStorage.getItem(e);if(!i)return null;try{const t=i.startsWith(this.COMPRESSION_MARKER)?this.decompress(i.slice(this.COMPRESSION_MARKER.length)):i;return JSON.parse(t)}catch(n){return console.error("Error parsing cached item:",n),null}}setItem(t,e){const i=this.prefix+t,n=JSON.stringify(e),a=()=>{try{const t=this.shouldCompress(n)?`${this.COMPRESSION_MARKER}${this.compress(n)}`:n;localStorage.setItem(i,t)}catch(t){console.error("Error storing item:",t),localStorage.setItem(i,n)}};"undefined"!=typeof requestIdleCallback?requestIdleCallback((()=>a())):setTimeout(a,0)}removeItem(t){const e=this.prefix+t;localStorage.removeItem(e)}clear(){if(this.prefix)for(let t in localStorage)t.startsWith(this.prefix)&&localStorage.removeItem(t);else localStorage.clear()}key(t){return localStorage.key(t)}get length(){return localStorage.length}}const p=class t{constructor(a,s={}){e(this,"config"),e(this,"translationService"),e(this,"currentLanguage"),e(this,"widget"),e(this,"elements"),e(this,"autoDetectLanguage"),e(this,"isTranslated",!1),e(this,"userLanguage"),e(this,"isTranslating",!1),e(this,"observer",null),e(this,"translationScheduled",!1),e(this,"scheduleTimeout",null),e(this,"showUI",!0),e(this,"lastTranslated",null),e(this,"currentTranslationPromise",null),e(this,"lastRequestedLanguage",null),e(this,"translationRequestId",0),e(this,"onUrlChange",(()=>{this.scheduleTranslation()}));let r={...o,...s};if(r.position&&!["top-right","top-left","bottom-left","bottom-right"].includes(r.position)&&(console.warn(`Invalid position '${r.position}' passed to TranslationWidget. Falling back to 'top-right'.`),r.position="top-right"),this.config=r,!a)throw new Error("Public key is required to initialize the translation widget");if(a.startsWith("sk_"))throw new Error("Please use public api key for security reasons. You can get one from https://jigsawstack.com");if(!a.startsWith("pk_"))throw new Error("Please use proper api key. You can get one from https://jigsawstack.com");this.translationService=new i(a),this.autoDetectLanguage=this.config.autoDetectLanguage||!1,this.currentLanguage=this.config.pageLanguage,this.userLanguage=(()=>{const t=window.navigator.languages,e=n.find((e=>t.includes(e.code)));return(null==e?void 0:e.code)||"en"})(),this.widget=document.createElement("div"),this.showUI=this.config.showUI??!0,this.elements={trigger:null,dropdown:null,searchInput:null,clearSearch:null,languageItems:null,loadingIndicator:null},this.initialize(),t.instance=this}initialize(){var t;if(!this.validateConfig())return;const e=this.getUrlParameter("lang");let i=this.config.pageLanguage;if(e){n.find((t=>t.code===e))&&(i=e)}else if(localStorage.getItem("jss-pref"))i=localStorage.getItem("jss-pref");else if(this.autoDetectLanguage)i=this.userLanguage;else if(!this.config.pageLanguage){const t=document.querySelector("html");i=t&&t.getAttribute("lang")?t.getAttribute("lang"):"en"}if(this.currentLanguage=i,this.showUI){this.createWidget();const e=null==(t=this.elements.trigger)?void 0:t.querySelector(".jigts-trigger-icon");if(e&&this.currentLanguage!==this.config.pageLanguage){const t=n.find((t=>t.code===this.currentLanguage)),i=t?t.name:this.currentLanguage.toUpperCase();e.innerHTML=`<span class="jigts-lang-code">${this.currentLanguage.toUpperCase()}</span><span class="jigts-lang-name">${i}</span>`}this.setupEventListeners(),this.setupURLObserver(),this.setupContentObserver()}this.currentLanguage!==this.config.pageLanguage&&this.translatePage(this.currentLanguage).catch((t=>{console.error("Initial translation error:",t)}))}getUrlParameter(t){return new URLSearchParams(window.location.search).get(t)}setupContentObserver(){this.observer=new MutationObserver((t=>{t.forEach((t=>{this.widget.contains(t.target)||"characterData"===t.type||"childList"===t.type&&Array.from(t.addedNodes).some((t=>t.nodeType===Node.TEXT_NODE))})),this.isTranslating||this.scheduleTranslation()})),this.observeBody()}observeBody(){var t;null==(t=this.observer)||t.observe(document.body,{childList:!0,subtree:!0,attributes:!0,characterData:!0})}setupURLObserver(){["pushState","replaceState"].forEach((t=>{const e=history[t];history[t]=function(i,n,a){const s=e.call(this,i,n,a);return window.dispatchEvent(new Event(t)),s},window.addEventListener(t,this.onUrlChange)})),window.addEventListener("popstate",this.onUrlChange)}validateConfig(){return!!this.translationService||(console.error("Translation service is required to initialize the translation widget"),!1)}createWidget(){var t;const e=this.getCurrentLanguageLabel();this.widget=document.createElement("div"),this.widget.className=`jigts-translation-widget jigts-position-${this.config.position||"top-right"}`,this.config.theme&&(this.config.theme.baseColor&&this.widget.style.setProperty("--jigts-custom-base-color",this.config.theme.baseColor),this.config.theme.textColor&&this.widget.style.setProperty("--jigts-custom-text-color",this.config.theme.textColor)),document.body.appendChild(this.widget),this.widget.innerHTML=this.createWidgetHTML(e),this.elements={trigger:this.widget.querySelector(".jigts-widget-trigger"),dropdown:this.widget.querySelector(".jigts-widget-dropdown"),searchInput:this.widget.querySelector(".jigts-search-input"),clearSearch:this.widget.querySelector(".jigts-clear-search"),languageItems:this.widget.querySelectorAll(".jigts-language-item"),loadingIndicator:this.widget.querySelector(".jigts-loading-spinner")};const i=null==(t=this.elements.trigger)?void 0:t.querySelector("span");i&&i.classList.add("jigts-fade-in")}getCurrentLanguageLabel(){var t;return(null==(t=n.find((t=>t.code===this.currentLanguage)))?void 0:t.native)||"English"}createWidgetHTML(t){const e=this.createLanguageOptions(),i=n.length;return'\x3c!-- Widget Trigger Button --\x3e\n<div class="jigts-widget-trigger" tabindex="0" role="button" aria-label="Open translation menu" aria-expanded="false">\n    \x3c!-- Normal State --\x3e\n    <div class="jigts-trigger-content">\n        <span class="jigts-trigger-icon">\n            <svg class="jigts-languages-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"\n                    d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129">\n                </path>\n            </svg>\n        </span>\n    </div>\n\n    \x3c!-- Loading State (hidden by default) --\x3e\n    <div class="jigts-trigger-loading" style="display: none;">\n        <div class="jigts-loading-spinner"></div>\n    </div>\n</div>\n\n\x3c!-- Dropdown Menu --\x3e\n<div class="jigts-widget-dropdown">\n    \x3c!-- Header --\x3e\n    <div class="jigts-dropdown-header">\n        <div class="jigts-dropdown-title">\n            <div class="jigts-title-left">\n                <svg class="jigts-languages-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"\n                        d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129">\n                    </path>\n                </svg>\n                <span class="jigts-title-text">Select Language</span>\n            </div>\n            <div class="jigts-language-count">{{languageCount}} languages</div>\n        </div>\n\n        \x3c!-- Search Input --\x3e\n        <div class="jigts-search-container">\n            <svg class="jigts-search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"\n                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>\n            </svg>\n            <input type="text" class="jigts-search-input" placeholder="Search languages..." aria-label="Search languages">\n            <svg class="jigts-clear-search" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">\n                </path>\n            </svg>\n        </div>\n    </div>\n\n    \x3c!-- Reset Option --\x3e\n    <div class="jigts-reset-option" tabindex="0" role="button" aria-label="Reset to original language">\n        <svg class="jigts-reset-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"\n                d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path>\n        </svg>\n        <div class="jigts-reset-text">\n            <span class="jigts-reset-title">Original Language</span>\n            <span class="jigts-reset-subtitle">Reset translation</span>\n        </div>\n    </div>\n\n    \x3c!-- Language List --\x3e\n    <div class="jigts-language-list">\n        {{languageOptions}}\n        <div class="jigts-no-results" style="display: none;">\n            <svg class="jigts-no-results-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"\n                    d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>\n            </svg>\n            <span>No languages found</span>\n        </div>\n    </div>\n</div>'.replace("{{languageOptions}}",e).replace("{{currentLanguageLabel}}",t).replace("{{languageCount}}",i.toString())}createLanguageOptions(){const t=this.currentLanguage,e=n.find((e=>e.code===t)),i=n.filter((e=>e.code!==t)).sort(((t,e)=>t.native.localeCompare(e.native)));if(!e)return"";const a=(t,e=!1)=>`\n            <div class="jigts-language-item ${e?"jigts-selected":""}" tabindex="0" role="option" aria-selected="${e}" data-language-code="${t.code}">\n                <div class="jigts-language-info">\n                    <div class="jigts-language-main">\n                        <span class="jigts-language-name">${t.name}</span>\n                        <div class="jigts-language-code">${t.code}</div>\n                    </div>\n                    <div class="jigts-language-details">\n                        <span class="jigts-language-native">${t.native}</span>\n                    </div>\n                </div>\n                <svg class="jigts-check-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>\n                </svg>\n            </div>\n        `;return`\n            ${a(e,!0)}\n            ${i.map((t=>a(t))).join("")}\n        `}async updateTriggerText(t){var e;const i=null==(e=this.elements.trigger)?void 0:e.querySelector("span");i&&(i.offsetHeight,i.classList.remove("jigts-fade-in"),i.classList.add("jigts-fade-out"),await new Promise((t=>setTimeout(t,300))),i.textContent=t,i.offsetHeight,i.classList.remove("jigts-fade-out"),i.classList.add("jigts-fade-in"))}getTextToTranslate(t,e,i){var n,a;if(e.hasAttribute("data-original-text")){const n=null==(a=t.textContent)?void 0:a.trim();return"en"!==this.currentLanguage&&"en"!==i?(e.setAttribute("data-translated-lang",i),e.getAttribute("data-original-text")):n||null}{const a=null==(n=t.textContent)?void 0:n.trim();if(a){if(e.setAttribute("data-translated-lang",i),e.setAttribute("data-original-text",a),!e.hasAttribute("data-original-font-size")){const t=window.getComputedStyle(e);e.setAttribute("data-original-font-size",t.fontSize)}return a}}return null}calculateFontSize(t,e,i){const n=parseInt(e),a=t.length;if(a<=i.length)return e;return`${Math.max(12,Math.min(n,n*(1-Math.log(a)/10)))}px`}updateLoadingState(t){var e,i;const n=null==(e=this.elements.trigger)?void 0:e.querySelector(".jigts-trigger-content"),a=null==(i=this.elements.trigger)?void 0:i.querySelector(".jigts-trigger-loading");n&&a&&(t?(n.style.display="none",a.style.display="flex"):(a.style.display="none",n.style.display="flex"))}async translatePage(t){const e=++this.translationRequestId;if(this.lastRequestedLanguage=t,this.updateLoadingState(!0),this.currentTranslationPromise&&await this.currentTranslationPromise,t===this.config.pageLanguage)return this.resetTranslations(),void(e===this.translationRequestId&&this.updateLoadingState(!1));this.currentTranslationPromise=this._translatePage(t);try{await this.currentTranslationPromise}catch(i){console.error("Translation failed:",i),this.resetToDefaultLanguage()}finally{e===this.translationRequestId&&(this.currentTranslationPromise=null,this.updateLoadingState(!1))}}resetToDefaultLanguage(){var t;this.resetTranslations(),this.lastRequestedLanguage=this.config.pageLanguage,this.currentLanguage=this.config.pageLanguage;this.widget.querySelectorAll(".jigts-language-item").forEach((t=>{const e=t.getAttribute("data-language-code")===this.config.pageLanguage;t.classList.toggle("jigts-selected",e),t.setAttribute("aria-selected",e.toString())})),console.log("resetToDefaultLanguage",this.config.pageLanguage),localStorage.setItem("jss-pref",this.config.pageLanguage);const e=null==(t=this.elements.trigger)?void 0:t.querySelector(".jigts-trigger-icon");e&&(e.innerHTML=this.getLanguageSVG()),this.isTranslated=!1,this.updateResetButtonVisibility()}async _translatePage(t){var e;this.isTranslating=!0,null==(e=this.observer)||e.disconnect();try{const e=r.findTranslatableContent(),i=r.divideIntoGroups(e,10),n=new h("jss-");let o=a(e);const l=[],g=[];i.forEach((e=>{const i=[],n=[];e.forEach((e=>{if(e.nodeType!==Node.TEXT_NODE)return;const a=e.parentElement;if(!a)return;const r=a.getAttribute("data-translated-lang");if(a.hasAttribute("data-original-text")&&t===r)return;let o=this.getTextToTranslate(e,a,t);o=s(o||""),0!==o.length&&1!==o.length&&o&&(i.push(o.trim()),n.push(e))})),l.push(n),g.push(i)}));const c=[],d=[];g.forEach(((t,e)=>{t.length>0&&(d.push(t),c.push(l[e]))}));const u=n.getKey(o,window.location.href,t),m=n.getItem(u);if(m&&m[0]){const i=m[0];return void(this.lastRequestedLanguage===t&&(e.forEach(((t,e)=>{if(t.nodeType===Node.TEXT_NODE){const n=t.parentElement;if(n){const t=n.getAttribute("data-original-text")||"",a=n.getAttribute("data-original-font-size")||"16px",s=this.calculateFontSize(i[e],a,t);n.style.fontSize=s}t.textContent=i[e]}})),this.isTranslated=!0,this.updateResetButtonVisibility()))}const p=await Promise.all(d.map((e=>this.translationService.translateBatchText(e,t))));if(0===p.length)return void(this.lastRequestedLanguage===t&&(this.isTranslated=!0,this.updateResetButtonVisibility()));if(p.every(((t,e)=>{const i=d[e];return t.every(((t,e)=>t===i[e]))})))throw console.warn("All translations failed, not caching results"),new Error("All translation batches failed");const v=[];e.forEach(((e,i)=>{const n=e.parentElement,a=c.findIndex((t=>t.includes(e)));if(-1!==a){const s=c[a].indexOf(e),r=p[a][s];if(v[i]=r,console.log(this.lastRequestedLanguage,t),this.lastRequestedLanguage===t){if(n){const t=n.getAttribute("data-original-text")||"",e=n.getAttribute("data-original-font-size")||"16px",i=this.calculateFontSize(r,e,t);n.style.fontSize=i}e.textContent=r}}else n&&n.getAttribute("data-translated-lang"),v[i]=e.textContent||""})),n.setItem(u,[v]),this.lastRequestedLanguage===t&&(this.isTranslated=!0,this.updateResetButtonVisibility())}finally{this.isTranslating=!1,this.observeBody()}}updateResetButtonVisibility(){const t=this.widget.querySelector(".jigts-reset-option");t&&(t.style.display=this.isTranslated?"flex":"none")}resetTranslations(){this.observer&&this.observer.disconnect();document.querySelectorAll("[data-original-text]").forEach((t=>{const e=Array.from(t.childNodes).filter((t=>t.nodeType===Node.TEXT_NODE));if(e.length>0){const i=t.getAttribute("data-original-text");i&&(e[0].textContent=i)}const i=t.getAttribute("data-original-font-size");i&&(t.style.fontSize=i),t.removeAttribute("data-original-text"),t.removeAttribute("data-translated-lang"),t.removeAttribute("data-original-font-size")})),this.isTranslated=!1,this.currentLanguage=this.config.pageLanguage;const t=a(r.findTranslatableContent());this.lastTranslated={url:window.location.href,lang:this.config.pageLanguage,hash:t},this.updateResetButtonVisibility(),this.observeBody()}adjustDropdownPosition(){const{dropdown:t,trigger:e}=this.elements;if(!t||!e)return;const i=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=window.innerWidth,s=window.innerHeight;t.style.top="",t.style.bottom="",t.style.left="",t.style.right="",t.style.transform="";const r=s-i.bottom,o=i.top,l=a-i.right,g=i.left;r<n.height&&o>r?(t.style.bottom="100%",t.style.top="auto",t.style.marginBottom="0.5rem",t.style.marginTop="0"):(t.style.top="100%",t.style.bottom="auto",t.style.marginTop="0.5rem",t.style.marginBottom="0"),l<n.width&&g>l?(t.style.right="0",t.style.left="auto"):(t.style.left="0",t.style.right="auto");const c=t.getBoundingClientRect();c.right>a&&(t.style.right="0",t.style.left="auto"),c.left<0&&(t.style.left="0",t.style.right="auto")}setupEventListeners(){const{trigger:t,dropdown:e,searchInput:i,clearSearch:n,languageItems:a}=this.elements;if(!(t&&e&&i&&n&&a))return void console.error("Failed to find required elements");const s=this.widget.querySelector(".jigts-reset-option");s&&s.addEventListener("click",(()=>{var i;if(this.isTranslating)return;this.resetToDefaultLanguage(),s.classList.remove("jigts-active"),this.isTranslated=!1,this.updateResetButtonVisibility();this.widget.querySelectorAll(".jigts-language-item").forEach((t=>{const e=t.getAttribute("data-language-code")===this.config.pageLanguage;t.classList.toggle("jigts-selected",e),t.setAttribute("aria-selected",e.toString())}));const n=null==(i=this.elements.trigger)?void 0:i.querySelector(".jigts-trigger-icon");n&&(n.innerHTML=this.getLanguageSVG()),e.classList.remove("jigts-open"),t.setAttribute("aria-expanded","false");const a=t.querySelector(".jigts-trigger-content");a&&a.classList.remove("jigts-has-translation")})),this.updateResetButtonVisibility(),t.addEventListener("click",(()=>{e.classList.toggle("jigts-open");const n=e.classList.contains("jigts-open");t.setAttribute("aria-expanded",n.toString()),n&&(this.adjustDropdownPosition(),i.focus())})),window.addEventListener("resize",(()=>{e.classList.contains("jigts-open")&&this.adjustDropdownPosition()})),document.addEventListener("click",(i=>{i.target.closest(".jigts-translation-widget")||e.classList.contains("jigts-open")&&(e.classList.add("jigts-closing"),setTimeout((()=>{e.classList.remove("jigts-open","jigts-closing"),t.setAttribute("aria-expanded","false")}),300))})),i.addEventListener("input",(()=>{const t=i.value.toLowerCase(),e=t.length>0;n.classList.toggle("jigts-visible",e);const a=this.widget.querySelectorAll(".jigts-language-item"),s=this.widget.querySelector(".jigts-no-results");let r=0;a.forEach((e=>{var i,n,a,s,o,l,g,c;const d=(null==(n=null==(i=e.querySelector(".jigts-language-name"))?void 0:i.textContent)?void 0:n.toLowerCase())||"",u=(null==(s=null==(a=e.querySelector(".jigts-language-native"))?void 0:a.textContent)?void 0:s.toLowerCase())||"",m=(null==(l=null==(o=e.querySelector(".jigts-language-code"))?void 0:o.textContent)?void 0:l.toLowerCase())||"",h=(null==(c=null==(g=e.querySelector(".jigts-language-region"))?void 0:g.textContent)?void 0:c.toLowerCase())||"",p=d.includes(t)||u.includes(t)||m.includes(t)||h.includes(t);e.style.display=p?"":"none",p&&r++})),s&&(s.style.display=0===r?"flex":"none")})),n.addEventListener("click",(()=>{i.value="",n.classList.remove("jigts-visible"),i.focus();const t=this.widget.querySelectorAll(".jigts-language-item"),e=this.widget.querySelector(".jigts-no-results");t.forEach((t=>{t.style.display=""})),e&&(e.style.display="none")})),a.forEach((i=>{i.addEventListener("click",(async()=>{var n,s;a.forEach((t=>{t.classList.remove("jigts-selected"),t.setAttribute("aria-selected","false")})),i.classList.add("jigts-selected"),i.setAttribute("aria-selected","true");const r=null==(n=i.querySelector(".jigts-language-name"))?void 0:n.textContent,o=i.getAttribute("data-language-code");e.classList.remove("jigts-open"),t.setAttribute("aria-expanded","false"),r&&await this.updateTriggerText(r),o&&localStorage.setItem("jss-pref",o);const l=null==(s=this.elements.trigger)?void 0:s.querySelector(".jigts-trigger-icon");l&&o&&r&&(l.innerHTML=`<span class="jigts-lang-code">${o.toUpperCase()}</span><span class="jigts-lang-name">${r}</span>`);const g=t.querySelector(".jigts-trigger-content");if(o&&o!==this.currentLanguage){g&&g.classList.add("jigts-has-translation");const e=t.querySelector(".jigts-trigger-loading");g&&e&&(g.style.display="none",e.style.display="flex");try{await this.translatePage(o),this.currentLanguage=o}catch(c){console.error("Translation error:",c),alert("An error occurred during translation. Please try again.")}}else g&&g.classList.remove("jigts-has-translation")}))})),document.addEventListener("keydown",(i=>{e.classList.contains("jigts-open")&&"Escape"===i.key&&(e.classList.remove("jigts-open"),t.setAttribute("aria-expanded","false"),t.focus())}))}scheduleTranslation(){if(this.translationScheduled)return;const t=window.location.href,e=this.currentLanguage,i=a(r.findTranslatableContent());this.lastTranslated&&this.lastTranslated.url===t&&this.lastTranslated.lang===e&&this.lastTranslated.hash===i||(this.translationScheduled=!0,this.scheduleTimeout&&clearTimeout(this.scheduleTimeout),this.scheduleTimeout=window.setTimeout((()=>{var n,a;if(this.translationScheduled=!1,this.currentLanguage!==this.config.pageLanguage){this.lastTranslated={url:t,lang:e,hash:i};const s=null==(n=this.elements.trigger)?void 0:n.querySelector(".jigts-trigger-content"),r=null==(a=this.elements.trigger)?void 0:a.querySelector(".jigts-trigger-loading");s&&r&&(s.style.display="none",r.style.display="flex"),this.translatePage(this.currentLanguage).then((()=>{this.widget.querySelectorAll(".jigts-language-item").forEach((t=>{const e=t.getAttribute("data-language-code")===this.currentLanguage;t.classList.toggle("jigts-selected",e),t.setAttribute("aria-selected",e.toString())}))})).catch((t=>{console.error("Auto-translation error:",t)}))}}),200))}async translateTo(t,e,i){var a;const s=Date.now();if(this.isTranslating)return console.warn("Translation already in progress"),null==i||i(new Error("Translation already in progress")),{success:!1,targetLanguage:t,translatedNodes:0,error:"Translation already in progress",duration:0};const r=n.find((e=>e.code===t));if(!r)return null==i||i(new Error(`Unsupported language code: ${t}`)),{success:!1,targetLanguage:t,translatedNodes:0,error:`Unsupported language code: ${t}`,duration:0};if(t===this.currentLanguage)return null==e||e({success:!0,targetLanguage:t,translatedNodes:0,duration:0}),{success:!0,targetLanguage:t,translatedNodes:0,duration:0};try{localStorage.setItem("jss-pref",t),await this.translatePage(t),this.currentLanguage=t;const i=this.widget.querySelectorAll(".jigts-language-item");for(const e of i){const i=e.getAttribute("data-language-code")===t;e.classList.toggle("jigts-selected",i),e.setAttribute("aria-selected",i.toString())}const n=null==(a=this.elements.trigger)?void 0:a.querySelector(".jigts-trigger-content");if(n){n.classList.add("jigts-has-translation");const t=n.querySelector(".jigts-trigger-icon");t&&r&&(t.innerHTML=`<span class="jigts-lang-code">${r.code.toUpperCase()}</span><span class="jigts-lang-name">${r.name}</span>`)}const o=Date.now(),l=document.querySelectorAll("[data-translated-lang]").length;return null==e||e({success:!0,targetLanguage:t,translatedNodes:l,duration:o-s}),{success:!0,targetLanguage:t,translatedNodes:l,duration:o-s}}catch(o){return null==i||i(o),{success:!1,targetLanguage:t,translatedNodes:0,error:o instanceof Error?o.message:"Unknown error occurred",duration:0}}}static getInstance(){return t.instance}getLanguageSVG(){return'\n            <svg class="jigts-languages-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"\n                    d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129">\n                </path>\n            </svg>\n        '}};e(p,"instance",null);let v,w=p;"undefined"!=typeof window&&(window.resetTranslation=(t,e,i)=>{const n=w.getInstance();if(n)try{n.resetToDefaultLanguage(),null==e||e({success:!0,targetLanguage:t})}catch(a){null==i||i(a)}},window.translate=async(t,e,i)=>{const n=w.getInstance();if(!n)return null==i||i(new Error("Translation widget not initialized")),{success:!1,targetLanguage:t,translatedNodes:0,error:"Translation widget not initialized",duration:0};const a=Date.now();try{const a=await n.translateTo(t,e,i);return null==e||e(a),a}catch(s){return null==i||i(s),{success:!1,targetLanguage:t,translatedNodes:0,error:s instanceof Error?s.message:"Unknown error occurred",duration:Date.now()-a}}});return(t,e)=>{if("undefined"==typeof window)throw new Error("Translation widget can only be used in browser environment");const i=()=>{if(!v){if(!document.querySelector("style[data-translation-widget]")){const t=document.createElement("style");t.setAttribute("data-translation-widget",""),t.textContent=':root{--jigts-base-color: white;--jigts-text-color: black;--jigts-bg-color: color-mix(in srgb, var(--jigts-base-color) 10%, white);--jigts-bg-hover: color-mix(in srgb, var(--jigts-text-color) 10%, white);--jigts-bg-active: color-mix(in srgb, var(--jigts-base-color) 30%, white)}*{box-sizing:border-box}.jigts-translation-widget{--jigts-base-color: var(--jigts-custom-base-color, white);--jigts-text-color: var(--jigts-custom-text-color, black);--jigts-bg-color: color-mix(in srgb, var(--jigts-base-color) 10%, white);--jigts-bg-hover: color-mix(in srgb, var(--jigts-text-color) 10%, white);--jigts-bg-active: color-mix(in srgb, var(--jigts-base-color) 30%, white);position:fixed;z-index:1000;color:var(--jigts-text-color)}.jigts-translation-widget.jigts-position-top-right{top:2rem;right:2rem}.jigts-translation-widget.jigts-position-top-left{top:2rem;left:2rem}.jigts-translation-widget.jigts-position-bottom-left{bottom:2rem;left:2rem}.jigts-translation-widget.jigts-position-bottom-right{bottom:2rem;right:2rem}.jigts-position-top-right .jigts-widget-dropdown,.jigts-position-top-left .jigts-widget-dropdown{top:calc(100% + .5rem)}.jigts-position-bottom-right .jigts-widget-dropdown,.jigts-position-bottom-left .jigts-widget-dropdown{bottom:calc(100% + .5rem)}.jigts-position-top-right .jigts-widget-dropdown,.jigts-position-bottom-right .jigts-widget-dropdown{right:0}.jigts-position-top-left .jigts-widget-dropdown,.jigts-position-bottom-left .jigts-widget-dropdown{left:0}.jigts-translation-widget{position:fixed}.jigts-translation-widget{max-width:fit-content}.jigts-trigger-content{display:flex;cursor:pointer;border-radius:6px;transition:all .2s ease}.jigts-trigger-icon{display:flex;align-items:center}.jigts-lang-code{font-weight:500;color:var(--jigts-text-color);font-size:14px}.jigts-lang-name{color:var(--jigts-text-color);font-size:14px;opacity:0;max-width:0;overflow:hidden;white-space:nowrap;transition:all .3s ease-in-out;display:inline-block}.jigts-lang-code{transition:all .3s ease-in-out}.jigts-widget-trigger:hover .jigts-lang-code{background:#e5e7eb;border-radius:50%;padding:.1rem .3rem;color:var(--jigts-text-color);font-weight:600;font-size:12px;transition:all .3s ease-in-out}.jigts-widget-trigger:hover .jigts-lang-name{opacity:1;margin-left:.5rem;max-width:150px}.jigts-widget-trigger{background:var(--jigts-bg-color);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid color-mix(in srgb,var(--jigts-base-color) 30%,white);border-radius:.75rem;padding:.3rem .6rem;cursor:pointer;display:flex;align-items:center;gap:.2rem;font-size:.9rem;font-weight:500;color:var(--jigts-text-color);box-shadow:0 10px 25px -5px #0000001a,0 10px 10px -5px #0000000a;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden;min-height:2.2rem;min-width:unset}.jigts-widget-trigger:hover{transform:scale(1.05) translateY(-2px);box-shadow:0 20px 40px -10px #00000026,0 10px 20px -5px #0000001a}.jigts-widget-trigger:active{transform:scale(.98)}.jigts-widget-trigger:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(var(--jigts-base-color),.1),transparent);transition:left .6s ease}.jigts-widget-trigger:hover:before{left:100%}.jigts-widget-dropdown{position:absolute;width:20rem;background:var(--jigts-bg-color);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid color-mix(in srgb,var(--jigts-base-color) 30%,white);border-radius:.75rem;box-shadow:0 25px 50px -12px #00000040;opacity:0;visibility:hidden;transform:scale(.95) translateY(10px);transition:all .3s cubic-bezier(.4,0,.2,1);max-height:28rem;overflow:hidden;min-height:30rem;display:none;flex-direction:column;z-index:1000}.jigts-widget-dropdown.jigts-open{opacity:1;visibility:visible;transform:scale(1) translateY(0);display:flex}.jigts-widget-dropdown.jigts-closing{opacity:0;transform:translateY(10px)}.jigts-dropdown-header{padding:1rem;border-bottom:1px solid color-mix(in srgb,var(--jigts-base-color) 20%,white);background:var(--jigts-bg-hover);border-radius:.75rem .75rem 0 0;animation:headerSlideDown .4s ease .1s both}.jigts-dropdown-title{display:flex;align-items:center;justify-content:space-between;margin-bottom:.75rem}.jigts-title-left{display:flex;align-items:center;gap:.5rem}.jigts-languages-icon{width:1rem;height:1rem;color:var(--jigts-text-color)}.jigts-title-text{font-size:.875rem;font-weight:600;color:var(--jigts-text-color)}.jigts-language-count{background:var(--jigts-bg-hover);border:1px solid color-mix(in srgb,var(--jigts-base-color) 30%,white);color:var(--jigts-text-color);padding:.125rem .5rem;border-radius:.375rem;font-size:.75rem;font-weight:500}.jigts-search-container{position:relative}.jigts-search-input{width:100%;padding:.5rem .75rem .5rem 2.5rem;border:1px solid #d1d5db;border-radius:.5rem;outline:none;font-size:.875rem;color:var(--jigts-text-color);background:#fff;transition:all .2s ease}.jigts-search-icon{position:absolute;left:.75rem;top:50%;transform:translateY(-50%);width:1rem;height:1rem;color:var(--jigts-text-color);opacity:.7}.jigts-clear-search{position:absolute;right:.75rem;top:50%;transform:translateY(-50%);width:1rem;height:1rem;color:var(--jigts-text-color);cursor:pointer;opacity:0;transition:all .2s ease}.jigts-clear-search.jigts-visible{opacity:.7}.jigts-clear-search:hover{opacity:1;transform:translateY(-50%) scale(1.1)}.jigts-reset-option{padding:.75rem 1rem;border-bottom:1px solid color-mix(in srgb,var(--jigts-base-color) 20%,white);cursor:pointer;display:flex;align-items:center;gap:.75rem;transition:background-color .2s ease;animation:resetSlideIn .4s ease .15s both;background:var(--jigts-bg-color)}.jigts-reset-option:hover{background:var(--jigts-bg-hover)}.jigts-reset-icon{width:1rem;height:1rem;color:var(--jigts-text-color);transition:transform .3s ease}.jigts-reset-option:hover .jigts-reset-icon{transform:rotate(-180deg)}.jigts-reset-text{display:flex;flex-direction:column}.jigts-reset-title{font-weight:500;color:var(--jigts-text-color);font-size:.875rem}.jigts-reset-subtitle{font-size:.75rem;color:var(--jigts-text-color);opacity:.7}.jigts-language-list{flex:1;overflow-y:auto;padding:.5rem;position:relative;min-height:200px}.jigts-language-item{display:flex;align-items:center;justify-content:space-between;margin-left:.5rem;margin-right:.5rem;margin-bottom:.5rem;padding:.625rem .75rem;border-radius:.5rem;cursor:pointer;transition:all .2s ease;border:1px solid transparent;animation:languageSlideIn .4s ease both;background:var(--jigts-bg-color)}.jigts-language-item.jigts-focused{background:var(--jigts-bg-hover);border-color:color-mix(in srgb,var(--jigts-base-color) 40%,white)}.jigts-language-item.jigts-selected{background:var(--jigts-bg-active)}.jigts-language-item:hover{background:var(--jigts-bg-hover)}.jigts-language-info{display:flex;flex-direction:column;align-items:flex-start;min-width:0;flex:1}.jigts-language-main{display:flex;align-items:center;gap:.5rem;width:100%}.jigts-language-name{font-weight:500;color:var(--jigts-text-color);font-size:.875rem;transition:color .2s ease;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.jigts-language-item:hover .jigts-language-name{color:var(--jigts-text-color);opacity:.8}.jigts-language-code{background:var(--jigts-bg-hover);color:var(--jigts-text-color);padding:.125rem .375rem;border-radius:.25rem;font-size:.75rem;font-weight:600;flex-shrink:0}.jigts-language-details{display:flex;align-items:center;gap:.25rem;font-size:.75rem;color:var(--jigts-text-color);opacity:.7;width:100%;margin-top:.125rem}.jigts-language-native{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.jigts-language-separator,.jigts-language-region{flex-shrink:0}.jigts-globe-icon{width:1rem;height:1rem;color:var(--jigts-text-color);transition:transform .5s ease}.jigts-widget-trigger:hover .jigts-globe-icon{transform:rotate(360deg)}.jigts-check-icon{width:1rem;height:1rem;color:var(--jigts-text-color);opacity:0;transform:scale(0);transition:all .3s cubic-bezier(.34,1.56,.64,1)}.jigts-language-item.jigts-selected .jigts-check-icon{opacity:1;transform:scale(1)}.jigts-loading-spinner{width:1rem;height:1rem;border:2px solid #e5e7eb;border-top:2px solid var(--jigts-base-color);border-radius:50%;animation:spin 1s linear infinite}.jigts-trigger-loading{display:none}.jigts-no-results{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:none;flex-direction:column;align-items:center;justify-content:center;color:var(--jigts-text-color);text-align:center;padding:24px;animation:fadeIn .4s ease}.jigts-no-results-icon{width:2rem;height:2rem;margin-bottom:.5rem;color:var(--jigts-text-color);opacity:.5}.jigts-no-results-title{font-size:.875rem;margin-bottom:.25rem}.jigts-no-results-subtitle{font-size:.75rem}.jigts-dropdown-footer{padding:.5rem 1rem;border-top:1px solid color-mix(in srgb,var(--jigts-base-color) 20%,white);background:var(--jigts-bg-hover);border-radius:0 0 .75rem .75rem;animation:footerSlideUp .4s ease .2s both}.jigts-footer-text{font-size:.75rem;color:var(--jigts-text-color);text-align:center;opacity:.7}.jigts-language-list::-webkit-scrollbar{width:6px}.jigts-language-list::-webkit-scrollbar-track{background:#f3f4f6;border-radius:3px}.jigts-language-list::-webkit-scrollbar-thumb{background:#d1d5db;border-radius:3px}.jigts-language-list::-webkit-scrollbar-thumb:hover{background:#9ca3af}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes badgeSlideIn{0%{transform:scale(0) translate(10px);opacity:0}to{transform:scale(1) translate(0);opacity:1}}@keyframes headerSlideDown{0%{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes resetSlideIn{0%{transform:translate(-20px);opacity:0}to{transform:translate(0);opacity:1}}@keyframes languageSlideIn{0%{transform:translate(-20px);opacity:0}to{transform:translate(0);opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes footerSlideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.jigts-language-item:nth-child(1){animation-delay:.2s}.jigts-language-item:nth-child(2){animation-delay:.22s}.jigts-language-item:nth-child(3){animation-delay:.24s}.jigts-language-item:nth-child(4){animation-delay:.26s}.jigts-language-item:nth-child(5){animation-delay:.28s}.jigts-language-item:nth-child(6){animation-delay:.3s}.jigts-language-item:nth-child(7){animation-delay:.32s}.jigts-language-item:nth-child(8){animation-delay:.34s}.jigts-language-item:nth-child(9){animation-delay:.36s}.jigts-language-item:nth-child(10){animation-delay:.38s}@media (max-width: 400px){.jigts-widget-dropdown{width:100vw;right:auto;left:50%;transform:translate(-59%) scale(.95) translateY(10px)}.jigts-widget-dropdown.jigts-open{transform:translate(-50%) scale(1) translateY(0)}}@media (prefers-contrast: high){.jigts-widget-trigger,.jigts-widget-dropdown{border:2px solid #000}}@media (prefers-reduced-motion: reduce){*{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}',document.head.appendChild(t)}v=new w(t,e)}return v};return"loading"===document.readyState?void window.addEventListener("DOMContentLoaded",i):i()}}));
//# sourceMappingURL=index.min.js.map
