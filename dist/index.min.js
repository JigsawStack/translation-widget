!function(e,a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define(a):(e="undefined"!=typeof globalThis?globalThis:e||self).TranslationWidget=a()}(this,(function(){"use strict";var e=Object.defineProperty,a=(a,n,i)=>((a,n,i)=>n in a?e(a,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[n]=i)(a,"symbol"!=typeof n?n+"":n,i);class n{constructor(e,n){a(this,"publicKey"),a(this,"cache"),a(this,"apiUrl","https://api.jigsawstack.com/v1/ai/translate"),this.publicKey=e,this.cache=n}async translateBatchText(e,a){try{const n=e.map((e=>this.cache.get(e,a)));if(!n.includes(void 0))return n;const i=await fetch(this.apiUrl,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.publicKey},body:JSON.stringify({text:e,target_language:a})});if(!i.ok){const e=new Error(`Error translating text: ${i.statusText}`);throw e.status=i.status,e.response=i,e}const t=await i.json(),s=Array.isArray(t.translated_text)?t.translated_text:[t.translated_text];return e.forEach(((e,n)=>{s[n]&&this.cache.set(e,a,s[n])})),s}catch(n){if(console.error("Translation error:",n),n instanceof Error){const e=n;e.status&&console.error(`HTTP Status: ${e.status}`)}return e}}}const i={primaryColor:"#2563eb",pageLanguage:"en"};class t{constructor(e=1e3){a(this,"cache"),a(this,"maxSize"),this.cache=new Map,this.maxSize=e}getKey(e,a){return`${a}:${e}`}get(e,a){return this.cache.get(this.getKey(e,a))}set(e,a,n){if(this.cache.size>=this.maxSize){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(this.getKey(e,a),n)}}class s{static getTranslatableNodes(){const e={acceptNode(e){var a;if(e.nodeType!==Node.TEXT_NODE)return NodeFilter.FILTER_REJECT;const n=e.parentElement;if(!n)return NodeFilter.FILTER_REJECT;return"SCRIPT"===n.tagName||"STYLE"===n.tagName||"CODE"===n.tagName||null!==n.closest(".translate-widget")||null!==n.closest(".notranslate")||!(null==(a=e.textContent)?void 0:a.trim())?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}},a=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,e),n=[];let i;for(;i=a.nextNode();)i.nodeType===Node.TEXT_NODE&&n.push(i);return n}static createBatches(e,a){const n=[];for(let i=0;i<e.length;i+=a)n.push(e.slice(i,i+a));return n}static isTranslatableNode(e){var a;if(e.nodeType!==Node.TEXT_NODE)return!1;const n=e.parentElement;return!!n&&!("SCRIPT"===n.tagName||"STYLE"===n.tagName||"CODE"===n.tagName||n.closest(".translate-widget")||n.closest(".notranslate")||!(null==(a=e.textContent)?void 0:a.trim()))}static getParentElement(e){return e.parentElement}}const o=[{code:"af",name:"Afrikaans",native:"Afrikaans",region:"South Africa"},{code:"am",name:"Amharic",native:"አማርኛ",region:"Ethiopia"},{code:"ar",name:"Arabic",native:"العربية",rtl:1,region:"Saudi Arabia"},{code:"as",name:"Assamese",native:"অসমীয়া",region:"India"},{code:"az",name:"Azerbaijani",native:"Azərbaycanca / آذربايجان",region:"Azerbaijan"},{code:"ba",name:"Bashkir",native:"Башҡорт",region:"Russia"},{code:"be",name:"Belarusian",native:"Беларуская",region:"Belarus"},{code:"bg",name:"Bulgarian",native:"Български",region:"Bulgaria"},{code:"bn",name:"Bengali",native:"বাংলা",region:"Bangladesh"},{code:"bo",name:"Tibetan",native:"བོད་ཡིག / Bod skad",region:"Tibet"},{code:"br",name:"Breton",native:"Brezhoneg",region:"France"},{code:"bs",name:"Bosnian",native:"Bosanski",region:"Bosnia"},{code:"ca",name:"Catalan",native:"Català",region:"Spain"},{code:"ch",name:"Chamorro",native:"Chamoru",region:"Guam"},{code:"co",name:"Corsican",native:"Corsu",region:"France"},{code:"cs",name:"Czech",native:"Česky",region:"Czech Republic"},{code:"cy",name:"Welsh",native:"Cymraeg",region:"Wales"},{code:"da",name:"Danish",native:"Dansk",region:"Denmark"},{code:"de",name:"German",native:"Deutsch",region:"Germany"},{code:"dv",name:"Divehi",native:"ދިވެހިބަސް",rtl:1,region:"Maldives"},{code:"dz",name:"Dzongkha",native:"ཇོང་ཁ",region:"Bhutan"},{code:"el",name:"Greek",native:"Ελληνικά",region:"Greece"},{code:"en",name:"English",native:"English",region:"United Kingdom"},{code:"eo",name:"Esperanto",native:"Esperanto",region:"International"},{code:"es",name:"Spanish",native:"Español",region:"Spain"},{code:"et",name:"Estonian",native:"Eesti",region:"Estonia"},{code:"eu",name:"Basque",native:"Euskara",region:"Spain"},{code:"fa",name:"Persian",native:"فارسی",rtl:1,region:"Iran"},{code:"ff",name:"Peul",native:"Fulfulde",region:"Nigeria"},{code:"fi",name:"Finnish",native:"Suomi",region:"Finland"},{code:"fj",name:"Fijian",native:"Na Vosa Vakaviti",region:"Fiji"},{code:"fo",name:"Faroese",native:"Føroyskt",region:"Faroe Islands"},{code:"fr",name:"French",native:"Français",region:"France"},{code:"fy",name:"West Frisian",native:"Frysk",region:"Netherlands"},{code:"ga",name:"Irish",native:"Gaeilge",region:"Ireland"},{code:"gd",name:"Scottish Gaelic",native:"Gàidhlig",region:"Scotland"},{code:"gl",name:"Galician",native:"Galego",region:"Spain"},{code:"gn",name:"Guarani",native:"Avañe'ẽ",region:"Paraguay"},{code:"gu",name:"Gujarati",native:"ગુજરાતી",region:"India"},{code:"gv",name:"Manx",native:"Gaelg",region:"Isle of Man"},{code:"ha",name:"Hausa",native:"هَوُسَ",rtl:1,region:"Nigeria"},{code:"he",name:"Hebrew",native:"עברית",rtl:1,region:"Israel"},{code:"hi",name:"Hindi",native:"हिन्दी",region:"India"},{code:"hr",name:"Croatian",native:"Hrvatski",region:"Croatia"},{code:"ht",name:"Haitian",native:"Krèyol ayisyen",region:"Haiti"},{code:"hu",name:"Hungarian",native:"Magyar",region:"Hungary"},{code:"hy",name:"Armenian",native:"Հայերեն",region:"Armenia"},{code:"id",name:"Indonesian",native:"Bahasa Indonesia",region:"Indonesia"},{code:"ig",name:"Igbo",native:"Igbo",region:"Nigeria"},{code:"is",name:"Icelandic",native:"Íslenska",region:"Iceland"},{code:"it",name:"Italian",native:"Italiano",region:"Italy"},{code:"iu",name:"Inuktitut",native:"ᐃᓄᒃᑎᑐᑦ",region:"Canada"},{code:"ja",name:"Japanese",native:"日本語",region:"Japan"},{code:"jv",name:"Javanese",native:"Basa Jawa",region:"Indonesia"},{code:"ka",name:"Georgian",native:"ქართული",region:"Georgia"},{code:"kg",name:"Kongo",native:"KiKongo",region:"Congo"},{code:"ki",name:"Kikuyu",native:"Gĩkũyũ",region:"Kenya"},{code:"kj",name:"Kuanyama",native:"Kuanyama",region:"Namibia"},{code:"kk",name:"Kazakh",native:"Қазақша",region:"Kazakhstan"},{code:"kl",name:"Greenlandic",native:"Kalaallisut",region:"Greenland"},{code:"km",name:"Cambodian",native:"ភាសាខ្មែរ",region:"Cambodia"},{code:"kn",name:"Kannada",native:"ಕನ್ನಡ",region:"India"},{code:"ko",name:"Korean",native:"한국어",region:"South Korea"},{code:"kr",name:"Kanuri",native:"Kanuri",region:"Nigeria"},{code:"ks",name:"Kashmiri",native:"कश्मीरी / كشميري",rtl:1,region:"India"},{code:"ku",name:"Kurdish",native:"Kurdî / كوردی",rtl:1,region:"Iraq"},{code:"kv",name:"Komi",native:"Коми",region:"Russia"},{code:"kw",name:"Cornish",native:"Kernewek",region:"United Kingdom"},{code:"ky",name:"Kirghiz",native:"Kırgızca / Кыргызча",region:"Kyrgyzstan"},{code:"la",name:"Latin",native:"Latina",region:"Vatican"},{code:"lb",name:"Luxembourgish",native:"Lëtzebuergesch",region:"Luxembourg"},{code:"lg",name:"Ganda",native:"Luganda",region:"Uganda"},{code:"li",name:"Limburgian",native:"Limburgs",region:"Netherlands"},{code:"ln",name:"Lingala",native:"Lingála",region:"Congo"},{code:"lo",name:"Laotian",native:"ລາວ / Pha xa lao",region:"Laos"},{code:"lt",name:"Lithuanian",native:"Lietuvių",region:"Lithuania"},{code:"lu",name:"Luba-Katanga",native:"Tshiluba",region:"Congo"},{code:"lv",name:"Latvian",native:"Latviešu",region:"Latvia"},{code:"mg",name:"Malagasy",native:"Malagasy",region:"Madagascar"},{code:"mh",name:"Marshallese",native:"Kajin Majel / Ebon",region:"Marshall Islands"},{code:"mi",name:"Maori",native:"Māori",region:"New Zealand"},{code:"mk",name:"Macedonian",native:"Македонски",region:"North Macedonia"},{code:"ml",name:"Malayalam",native:"മലയാളം",region:"India"},{code:"mn",name:"Mongolian",native:"Монгол",region:"Mongolia"},{code:"mo",name:"Moldovan",native:"Moldovenească",region:"Moldova"},{code:"mr",name:"Marathi",native:"मराठी",region:"India"},{code:"ms",name:"Malay",native:"Bahasa Melayu",region:"Malaysia"},{code:"mt",name:"Maltese",native:"bil-Malti",region:"Malta"},{code:"sv",name:"Swedish",native:"Svenska",region:"Sweden"},{code:"sw",name:"Swahili",native:"Kiswahili",region:"Tanzania"},{code:"ta",name:"Tamil",native:"தமிழ்",region:"India"},{code:"te",name:"Telugu",native:"తెలుగు",region:"India"},{code:"tg",name:"Tajik",native:"Тоҷикӣ",region:"Tajikistan"},{code:"th",name:"Thai",native:"ไทย / Phasa Thai",region:"Thailand"},{code:"ti",name:"Tigrinya",native:"ትግርኛ",region:"Eritrea"},{code:"tk",name:"Turkmen",native:"Туркмен / تركمن",region:"Turkmenistan"},{code:"tl",name:"Tagalog",native:"Tagalog",region:"Philippines"},{code:"tn",name:"Tswana",native:"Setswana",region:"Botswana"},{code:"to",name:"Tonga",native:"Lea Faka-Tonga",region:"Tonga"},{code:"tr",name:"Turkish",native:"Türkçe",region:"Turkey"},{code:"ts",name:"Tsonga",native:"Xitsonga",region:"South Africa"},{code:"tt",name:"Tatar",native:"Tatarça",region:"Russia"},{code:"tw",name:"Twi",native:"Twi",region:"Ghana"},{code:"ty",name:"Tahitian",native:"Reo Mā`ohi",region:"French Polynesia"},{code:"ug",name:"Uyghur",native:"Uyƣurqə / ئۇيغۇرچە",region:"China"},{code:"uk",name:"Ukrainian",native:"Українська",region:"Ukraine"},{code:"ur",name:"Urdu",native:"اردو",rtl:1,region:"Pakistan"},{code:"uz",name:"Uzbek",native:"Ўзбек",region:"Uzbekistan"},{code:"ve",name:"Venda",native:"Tshivenḓa",region:"South Africa"},{code:"vi",name:"Vietnamese",native:"Tiếng Việt",region:"Vietnam"},{code:"vo",name:"Volapük",native:"Volapük",region:"International"},{code:"wo",name:"Wolof",native:"Wollof",region:"Senegal"},{code:"xh",name:"Xhosa",native:"isiXhosa",region:"South Africa"},{code:"yi",name:"Yiddish",native:"ייִדיש",rtl:1,region:"Israel"},{code:"yo",name:"Yoruba",native:"Yorùbá",region:"Nigeria"},{code:"zh",name:"Chinese",native:"中文",region:"China"},{code:"zu",name:"Zulu",native:"isiZulu",region:"South Africa"}];class r{constructor(e,s={}){a(this,"config"),a(this,"translationService"),a(this,"currentLanguage"),a(this,"widget"),a(this,"elements"),this.config={...i,...s},this.translationService=new n(e,new t),this.currentLanguage=this.config.pageLanguage,this.widget=document.createElement("div"),this.elements={trigger:null,dropdown:null,searchInput:null,clearSearch:null,languageItems:null,loadingIndicator:null},this.initialize()}initialize(){this.validateConfig()&&(this.createWidget(),this.setupEventListeners())}validateConfig(){return!!this.translationService||(console.error("Translation service is required to initialize the translation widget"),!1)}createWidget(){const e=this.getCurrentLanguageLabel();this.widget.className="translate-widget",this.widget.innerHTML=this.createWidgetHTML(e),document.body.appendChild(this.widget),this.elements={trigger:this.widget.querySelector(".widget-trigger"),dropdown:this.widget.querySelector(".widget-dropdown"),searchInput:this.widget.querySelector(".search-input"),clearSearch:this.widget.querySelector(".clear-search"),languageItems:this.widget.querySelectorAll(".language-item"),loadingIndicator:this.widget.querySelector(".loading-spinner")}}getCurrentLanguageLabel(){var e;return(null==(e=o.find((e=>e.code===this.currentLanguage)))?void 0:e.native)||"English"}createWidgetHTML(e){const a=this.createLanguageOptions();return'<div class="translation-widget">\n    \x3c!-- Widget Trigger Button --\x3e\n    <div class="widget-trigger" tabindex="0" role="button" aria-label="Open translation menu" aria-expanded="false">\n        \x3c!-- Normal State --\x3e\n        <div class="trigger-content">\n            <svg class="globe-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9m0 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"></path>\n            </svg>\n            <span>Translate</span>\n            <div class="language-badge">ES</div>\n        </div>\n        \n        \x3c!-- Loading State (hidden by default) --\x3e\n        <div class="trigger-loading" style="display: none;">\n            <div class="loading-spinner"></div>\n            <span>Translating...</span>\n        </div>\n    </div>\n\n    \x3c!-- Dropdown Menu --\x3e\n    <div class="widget-dropdown open">\n        \x3c!-- Header --\x3e\n        <div class="dropdown-header">\n            <div class="dropdown-title">\n                <div class="title-left">\n                    <svg class="languages-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"></path>\n                    </svg>\n                    <span class="title-text">Select Language</span>\n                </div>\n                <div class="language-count">100 languages</div>\n            </div>\n            \n            \x3c!-- Search Input --\x3e\n            <div class="search-container">\n                <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>\n                </svg>\n                <input type="text" class="search-input" placeholder="Search languages..." aria-label="Search languages">\n                <svg class="clear-search" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>\n                </svg>\n            </div>\n        </div>\n\n        \x3c!-- Reset Option --\x3e\n        <div class="reset-option" tabindex="0" role="button" aria-label="Reset to original language">\n            <svg class="reset-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path>\n            </svg>\n            <div class="reset-text">\n                <span class="reset-title">Original Language</span>\n                <span class="reset-subtitle">Reset translation</span>\n            </div>\n        </div>\n\n        \x3c!-- Language List --\x3e\n        <div class="language-list">\n            <div class="language-item selected" tabindex="0" role="option" aria-selected="true">\n                <div class="language-info">\n                    <div class="language-main">\n                        <span class="language-name">Spanish</span>\n                        <div class="language-code">ES</div>\n                    </div>\n                    <div class="language-details">\n                        <span class="language-native">Español</span>\n                        <span class="language-separator">•</span>\n                        <span class="language-region">Europe</span>\n                    </div>\n                </div>\n                <svg class="check-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>\n                </svg>\n            </div>\n\n            <div class="language-item" tabindex="0" role="option" aria-selected="false">\n                <div class="language-info">\n                    <div class="language-main">\n                        <span class="language-name">French</span>\n                        <div class="language-code">FR</div>\n                    </div>\n                    <div class="language-details">\n                        <span class="language-native">Français</span>\n                        <span class="language-separator">•</span>\n                        <span class="language-region">Europe</span>\n                    </div>\n                </div>\n                <svg class="check-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>\n                </svg>\n            </div>\n\n            <div class="language-item" tabindex="0" role="option" aria-selected="false">\n                <div class="language-info">\n                    <div class="language-main">\n                        <span class="language-name">German</span>\n                        <div class="language-code">DE</div>\n                    </div>\n                    <div class="language-details">\n                        <span class="language-native">Deutsch</span>\n                        <span class="language-separator">•</span>\n                        <span class="language-region">Europe</span>\n                    </div>\n                </div>\n                <svg class="check-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>\n                </svg>\n            </div>\n\n            <div class="language-item" tabindex="0" role="option" aria-selected="false">\n                <div class="language-info">\n                    <div class="language-main">\n                        <span class="language-name">Italian</span>\n                        <div class="language-code">IT</div>\n                    </div>\n                    <div class="language-details">\n                        <span class="language-native">Italiano</span>\n                        <span class="language-separator">•</span>\n                        <span class="language-region">Europe</span>\n                    </div>\n                </div>\n                <svg class="check-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>\n                </svg>\n            </div>\n\n            <div class="language-item" tabindex="0" role="option" aria-selected="false">\n                <div class="language-info">\n                    <div class="language-main">\n                        <span class="language-name">Portuguese</span>\n                        <div class="language-code">PT</div>\n                    </div>\n                    <div class="language-details">\n                        <span class="language-native">Português</span>\n                        <span class="language-separator">•</span>\n                        <span class="language-region">Europe</span>\n                    </div>\n                </div>\n                <svg class="check-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>\n                </svg>\n            </div>\n\n            <div class="language-item" tabindex="0" role="option" aria-selected="false">\n                <div class="language-info">\n                    <div class="language-main">\n                        <span class="language-name">Japanese</span>\n                        <div class="language-code">JA</div>\n                    </div>\n                    <div class="language-details">\n                        <span class="language-native">日本語</span>\n                        <span class="language-separator">•</span>\n                        <span class="language-region">Asia</span>\n                    </div>\n                </div>\n                <svg class="check-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>\n                </svg>\n            </div>\n\n            <div class="language-item" tabindex="0" role="option" aria-selected="false">\n                <div class="language-info">\n                    <div class="language-main">\n                        <span class="language-name">Korean</span>\n                        <div class="language-code">KO</div>\n                    </div>\n                    <div class="language-details">\n                        <span class="language-native">한국어</span>\n                        <span class="language-separator">•</span>\n                        <span class="language-region">Asia</span>\n                    </div>\n                </div>\n                <svg class="check-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>\n                </svg>\n            </div>\n\n            <div class="language-item" tabindex="0" role="option" aria-selected="false">\n                <div class="language-info">\n                    <div class="language-main">\n                        <span class="language-name">Chinese (Simplified)</span>\n                        <div class="language-code">ZH</div>\n                    </div>\n                    <div class="language-details">\n                        <span class="language-native">中文(简体)</span>\n                        <span class="language-separator">•</span>\n                        <span class="language-region">Asia</span>\n                    </div>\n                </div>\n                <svg class="check-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>\n                </svg>\n            </div>\n\n            <div class="language-item" tabindex="0" role="option" aria-selected="false">\n                <div class="language-info">\n                    <div class="language-main">\n                        <span class="language-name">Arabic</span>\n                        <div class="language-code">AR</div>\n                    </div>\n                    <div class="language-details">\n                        <span class="language-native">العربية</span>\n                        <span class="language-separator">•</span>\n                        <span class="language-region">Middle East</span>\n                    </div>\n                </div>\n                <svg class="check-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>\n                </svg>\n            </div>\n\n            <div class="language-item" tabindex="0" role="option" aria-selected="false">\n                <div class="language-info">\n                    <div class="language-main">\n                        <span class="language-name">Hindi</span>\n                        <div class="language-code">HI</div>\n                    </div>\n                    <div class="language-details">\n                        <span class="language-native">हिन्दी</span>\n                        <span class="language-separator">•</span>\n                        <span class="language-region">Asia</span>\n                    </div>\n                </div>\n                <svg class="check-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>\n                </svg>\n            </div>\n        </div>\n\n        \x3c!-- Footer --\x3e\n        <div class="dropdown-footer">\n            <p class="footer-text">Use ↑↓ to navigate, Enter to select, Esc to close</p>\n        </div>\n    </div>\n</div>'.replace("{{languageOptions}}",a).replace("{{currentLanguageLabel}}",e)}createLanguageOptions(){const e=this.currentLanguage,a=o.find((a=>a.code===e)),n=o.filter((a=>a.code!==e)).sort(((e,a)=>e.native.localeCompare(a.native)));return a?`\n      <option class="translate-target-language" value="${e}">${a.native}</option>\n      ${n.map((e=>`<option class="translate-target-language" value="${e.code}">${e.native}</option>`)).join("")}\n    `:""}setupEventListeners(){const{trigger:e,dropdown:a,searchInput:n,clearSearch:i,languageItems:t,loadingIndicator:s}=this.elements;e&&a&&n&&i&&t?(e.addEventListener("click",(()=>{a.classList.toggle("open");const i=a.classList.contains("open");e.setAttribute("aria-expanded",i.toString()),i&&n.focus()})),document.addEventListener("click",(n=>{n.target.closest(".translation-widget")||(a.classList.remove("open"),e.setAttribute("aria-expanded","false"))})),n.addEventListener("input",(()=>{const e=n.value.length>0;i.classList.toggle("visible",e)})),i.addEventListener("click",(()=>{n.value="",i.classList.remove("visible"),n.focus()})),t.forEach((n=>{n.addEventListener("click",(async()=>{var i,o;t.forEach((e=>{e.classList.remove("selected"),e.setAttribute("aria-selected","false")})),n.classList.add("selected"),n.setAttribute("aria-selected","true");const r=null==(i=n.querySelector(".language-name"))?void 0:i.textContent,l=null==(o=n.querySelector(".language-code"))?void 0:o.textContent,c=e.querySelector("span"),g=e.querySelector(".language-badge");if(c&&r&&(c.textContent=r),g&&l&&(g.textContent=l),a.classList.remove("open"),e.setAttribute("aria-expanded","false"),l&&l!==this.currentLanguage){s&&(s.style.display="flex");try{await this.translatePage(l),this.currentLanguage=l}catch(d){console.error("Translation error:",d),alert("An error occurred during translation. Please try again.")}finally{s&&(s.style.display="none")}}}))})),document.addEventListener("keydown",(n=>{a.classList.contains("open")&&"Escape"===n.key&&(a.classList.remove("open"),e.setAttribute("aria-expanded","false"),e.focus())}))):console.error("Failed to find required elements")}async translatePage(e){const a=s.getTranslatableNodes(),n=s.createBatches(a,10);await Promise.all(n.map((a=>this.processBatch(a,e))))}async processBatch(e,a){const n=[],i=[];if(e.forEach((e=>{if(e.nodeType!==Node.TEXT_NODE)return;const t=e.parentElement;if(!t)return;const s=this.getTextToTranslate(e,t,a);s&&(n.push(s),i.push(e))})),n.length>0){(await this.translationService.translateBatchText(n,a)).forEach(((e,a)=>{i[a].nodeType===Node.TEXT_NODE&&(i[a].textContent=e)}))}}getTextToTranslate(e,a,n){var i,t;if(a.hasAttribute("data-original-text")){const i=null==(t=e.textContent)?void 0:t.trim();return"en"!==this.currentLanguage&&"en"!==n?a.getAttribute("data-original-text"):i||null}{const n=null==(i=e.textContent)?void 0:i.trim();if(n)return a.setAttribute("data-original-text",n),n}return null}}return(e,a)=>{if("undefined"==typeof window)throw new Error("Translation widget can only be used in browser environment");return new r(e,a)}}));
//# sourceMappingURL=index.min.js.map
