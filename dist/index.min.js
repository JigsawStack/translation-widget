!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).TranslationWidget=n()}(this,(function(){"use strict";var e=Object.defineProperty,n=(n,a,t)=>((n,a,t)=>a in n?e(n,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[a]=t)(n,"symbol"!=typeof a?a+"":a,t);const a={primaryColor:"#2563eb",pageLanguage:"en",autoDetectLanguage:!1};class t{constructor(){n(this,"cache"),n(this,"maxSize"),this.cache=new Map,this.maxSize=1e3}getKey(e,n){return`${e}-${n}`}set(e,n,a){const t=this.getKey(e,n);this.cache.set(t,a)}get(e,n){const a=this.getKey(e,n);return this.cache.get(a)}clear(){this.cache.clear()}}class i{constructor(e){n(this,"publicKey"),n(this,"cache"),n(this,"cacheMetrics",{hits:0,misses:0}),n(this,"apiUrl","https://api.jigsawstack.com/v1/ai/translate"),this.publicKey=e,this.cache=new t}getCacheMetrics(){return{...this.cacheMetrics}}resetTranslations(){document.querySelectorAll("[data-original-text]").forEach((e=>{const n=Array.from(e.childNodes).filter((e=>e.nodeType===Node.TEXT_NODE));if(n.length>0){const a=e.getAttribute("data-original-text");a&&(n[0].textContent=a)}}))}async translateBatchText(e,n){try{const a=e.map((e=>this.cache.get(e,n)));if(a.forEach((e=>{void 0===e?this.cacheMetrics.misses++:this.cacheMetrics.hits++})),!a.includes(void 0))return console.log(`Cache metrics - Hits: ${this.cacheMetrics.hits}, Misses: ${this.cacheMetrics.misses}`),a;const t=await fetch(this.apiUrl,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.publicKey},body:JSON.stringify({text:e,target_language:n})});if(!t.ok){const e=new Error(`Error translating text: ${t.statusText}`);throw e.status=t.status,e.response=t,e}const i=await t.json(),o=Array.isArray(i.translated_text)?i.translated_text:[i.translated_text];return e.forEach(((e,a)=>{o[a]&&this.cache.set(e,n,o[a])})),console.log(`Cache metrics - Hits: ${this.cacheMetrics.hits}, Misses: ${this.cacheMetrics.misses}`),o}catch(a){if(console.error("Translation error:",a),a instanceof Error){const e=a;e.status&&console.error(`HTTP Status: ${e.status}`)}return e}}}class o{static findTranslatableContent(){const e={acceptNode(e){var n;if(e.nodeType!==Node.TEXT_NODE)return NodeFilter.FILTER_REJECT;const a=e.parentElement;if(!a)return NodeFilter.FILTER_REJECT;return"SCRIPT"===a.tagName||"STYLE"===a.tagName||"CODE"===a.tagName||null!==a.closest(".translate-widget")||null!==a.closest(".notranslate")||!(null==(n=e.textContent)?void 0:n.trim())?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}},n=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,e),a=[];let t;for(;t=n.nextNode();)t.nodeType===Node.TEXT_NODE&&a.push(t);return a}static divideIntoGroups(e,n){const a=[];for(let t=0;t<e.length;t+=n)a.push(e.slice(t,t+n));return a}static containsTranslatableContent(e){var n;if(e.nodeType!==Node.TEXT_NODE)return!1;const a=e.parentElement;return!!a&&!("SCRIPT"===a.tagName||"STYLE"===a.tagName||"CODE"===a.tagName||a.closest(".translate-widget")||a.closest(".notranslate")||!(null==(n=e.textContent)?void 0:n.trim()))}static getContainer(e){return e.parentElement}}const s=[{code:"af",name:"Afrikaans",native:"Afrikaans",region:"South Africa"},{code:"am",name:"Amharic",native:"አማርኛ",region:"Ethiopia"},{code:"ar",name:"Arabic",native:"العربية",rtl:1,region:"Saudi Arabia"},{code:"as",name:"Assamese",native:"অসমীয়া",region:"India"},{code:"az",name:"Azerbaijani",native:"Azərbaycanca / آذربايجان",region:"Azerbaijan"},{code:"ba",name:"Bashkir",native:"Башҡорт",region:"Russia"},{code:"be",name:"Belarusian",native:"Беларуская",region:"Belarus"},{code:"bg",name:"Bulgarian",native:"Български",region:"Bulgaria"},{code:"bn",name:"Bengali",native:"বাংলা",region:"Bangladesh"},{code:"bo",name:"Tibetan",native:"བོད་ཡིག / Bod skad",region:"Tibet"},{code:"br",name:"Breton",native:"Brezhoneg",region:"France"},{code:"bs",name:"Bosnian",native:"Bosanski",region:"Bosnia"},{code:"ca",name:"Catalan",native:"Català",region:"Spain"},{code:"ch",name:"Chamorro",native:"Chamoru",region:"Guam"},{code:"co",name:"Corsican",native:"Corsu",region:"France"},{code:"cs",name:"Czech",native:"Česky",region:"Czech Republic"},{code:"cy",name:"Welsh",native:"Cymraeg",region:"Wales"},{code:"da",name:"Danish",native:"Dansk",region:"Denmark"},{code:"de",name:"German",native:"Deutsch",region:"Germany"},{code:"dv",name:"Divehi",native:"ދިވެހިބަސް",rtl:1,region:"Maldives"},{code:"dz",name:"Dzongkha",native:"ཇོང་ཁ",region:"Bhutan"},{code:"el",name:"Greek",native:"Ελληνικά",region:"Greece"},{code:"en",name:"English",native:"English",region:"United Kingdom"},{code:"eo",name:"Esperanto",native:"Esperanto",region:"International"},{code:"es",name:"Spanish",native:"Español",region:"Spain"},{code:"et",name:"Estonian",native:"Eesti",region:"Estonia"},{code:"eu",name:"Basque",native:"Euskara",region:"Spain"},{code:"fa",name:"Persian",native:"فارسی",rtl:1,region:"Iran"},{code:"ff",name:"Peul",native:"Fulfulde",region:"Nigeria"},{code:"fi",name:"Finnish",native:"Suomi",region:"Finland"},{code:"fj",name:"Fijian",native:"Na Vosa Vakaviti",region:"Fiji"},{code:"fo",name:"Faroese",native:"Føroyskt",region:"Faroe Islands"},{code:"fr",name:"French",native:"Français",region:"France"},{code:"fy",name:"West Frisian",native:"Frysk",region:"Netherlands"},{code:"ga",name:"Irish",native:"Gaeilge",region:"Ireland"},{code:"gd",name:"Scottish Gaelic",native:"Gàidhlig",region:"Scotland"},{code:"gl",name:"Galician",native:"Galego",region:"Spain"},{code:"gn",name:"Guarani",native:"Avañe'ẽ",region:"Paraguay"},{code:"gu",name:"Gujarati",native:"ગુજરાતી",region:"India"},{code:"gv",name:"Manx",native:"Gaelg",region:"Isle of Man"},{code:"ha",name:"Hausa",native:"هَوُسَ",rtl:1,region:"Nigeria"},{code:"he",name:"Hebrew",native:"עברית",rtl:1,region:"Israel"},{code:"hi",name:"Hindi",native:"हिन्दी",region:"India"},{code:"hr",name:"Croatian",native:"Hrvatski",region:"Croatia"},{code:"ht",name:"Haitian",native:"Krèyol ayisyen",region:"Haiti"},{code:"hu",name:"Hungarian",native:"Magyar",region:"Hungary"},{code:"hy",name:"Armenian",native:"Հայերեն",region:"Armenia"},{code:"id",name:"Indonesian",native:"Bahasa Indonesia",region:"Indonesia"},{code:"ig",name:"Igbo",native:"Igbo",region:"Nigeria"},{code:"is",name:"Icelandic",native:"Íslenska",region:"Iceland"},{code:"it",name:"Italian",native:"Italiano",region:"Italy"},{code:"iu",name:"Inuktitut",native:"ᐃᓄᒃᑎᑐᑦ",region:"Canada"},{code:"ja",name:"Japanese",native:"日本語",region:"Japan"},{code:"jv",name:"Javanese",native:"Basa Jawa",region:"Indonesia"},{code:"ka",name:"Georgian",native:"ქართული",region:"Georgia"},{code:"kg",name:"Kongo",native:"KiKongo",region:"Congo"},{code:"ki",name:"Kikuyu",native:"Gĩkũyũ",region:"Kenya"},{code:"kj",name:"Kuanyama",native:"Kuanyama",region:"Namibia"},{code:"kk",name:"Kazakh",native:"Қазақша",region:"Kazakhstan"},{code:"kl",name:"Greenlandic",native:"Kalaallisut",region:"Greenland"},{code:"km",name:"Cambodian",native:"ភាសាខ្មែរ",region:"Cambodia"},{code:"kn",name:"Kannada",native:"ಕನ್ನಡ",region:"India"},{code:"ko",name:"Korean",native:"한국어",region:"South Korea"},{code:"kr",name:"Kanuri",native:"Kanuri",region:"Nigeria"},{code:"ks",name:"Kashmiri",native:"कश्मीरी / كشميري",rtl:1,region:"India"},{code:"ku",name:"Kurdish",native:"Kurdî / كوردی",rtl:1,region:"Iraq"},{code:"kv",name:"Komi",native:"Коми",region:"Russia"},{code:"kw",name:"Cornish",native:"Kernewek",region:"United Kingdom"},{code:"ky",name:"Kirghiz",native:"Kırgızca / Кыргызча",region:"Kyrgyzstan"},{code:"la",name:"Latin",native:"Latina",region:"Vatican"},{code:"lb",name:"Luxembourgish",native:"Lëtzebuergesch",region:"Luxembourg"},{code:"lg",name:"Ganda",native:"Luganda",region:"Uganda"},{code:"li",name:"Limburgian",native:"Limburgs",region:"Netherlands"},{code:"ln",name:"Lingala",native:"Lingála",region:"Congo"},{code:"lo",name:"Laotian",native:"ລາວ / Pha xa lao",region:"Laos"},{code:"lt",name:"Lithuanian",native:"Lietuvių",region:"Lithuania"},{code:"lu",name:"Luba-Katanga",native:"Tshiluba",region:"Congo"},{code:"lv",name:"Latvian",native:"Latviešu",region:"Latvia"},{code:"mg",name:"Malagasy",native:"Malagasy",region:"Madagascar"},{code:"mh",name:"Marshallese",native:"Kajin Majel / Ebon",region:"Marshall Islands"},{code:"mi",name:"Maori",native:"Māori",region:"New Zealand"},{code:"mk",name:"Macedonian",native:"Македонски",region:"North Macedonia"},{code:"ml",name:"Malayalam",native:"മലയാളം",region:"India"},{code:"mn",name:"Mongolian",native:"Монгол",region:"Mongolia"},{code:"mo",name:"Moldovan",native:"Moldovenească",region:"Moldova"},{code:"mr",name:"Marathi",native:"मराठी",region:"India"},{code:"ms",name:"Malay",native:"Bahasa Melayu",region:"Malaysia"},{code:"mt",name:"Maltese",native:"bil-Malti",region:"Malta"},{code:"sv",name:"Swedish",native:"Svenska",region:"Sweden"},{code:"sw",name:"Swahili",native:"Kiswahili",region:"Tanzania"},{code:"ta",name:"Tamil",native:"தமிழ்",region:"India"},{code:"te",name:"Telugu",native:"తెలుగు",region:"India"},{code:"tg",name:"Tajik",native:"Тоҷикӣ",region:"Tajikistan"},{code:"th",name:"Thai",native:"ไทย / Phasa Thai",region:"Thailand"},{code:"ti",name:"Tigrinya",native:"ትግርኛ",region:"Eritrea"},{code:"tk",name:"Turkmen",native:"Туркмен / تركمن",region:"Turkmenistan"},{code:"tl",name:"Tagalog",native:"Tagalog",region:"Philippines"},{code:"tn",name:"Tswana",native:"Setswana",region:"Botswana"},{code:"to",name:"Tonga",native:"Lea Faka-Tonga",region:"Tonga"},{code:"tr",name:"Turkish",native:"Türkçe",region:"Turkey"},{code:"ts",name:"Tsonga",native:"Xitsonga",region:"South Africa"},{code:"tt",name:"Tatar",native:"Tatarça",region:"Russia"},{code:"tw",name:"Twi",native:"Twi",region:"Ghana"},{code:"ty",name:"Tahitian",native:"Reo Mā`ohi",region:"French Polynesia"},{code:"ug",name:"Uyghur",native:"Uyƣurqə / ئۇيغۇرچە",region:"China"},{code:"uk",name:"Ukrainian",native:"Українська",region:"Ukraine"},{code:"ur",name:"Urdu",native:"اردو",rtl:1,region:"Pakistan"},{code:"uz",name:"Uzbek",native:"Ўзбек",region:"Uzbekistan"},{code:"ve",name:"Venda",native:"Tshivenḓa",region:"South Africa"},{code:"vi",name:"Vietnamese",native:"Tiếng Việt",region:"Vietnam"},{code:"vo",name:"Volapük",native:"Volapük",region:"International"},{code:"wo",name:"Wolof",native:"Wollof",region:"Senegal"},{code:"xh",name:"Xhosa",native:"isiXhosa",region:"South Africa"},{code:"yi",name:"Yiddish",native:"ייִדיש",rtl:1,region:"Israel"},{code:"yo",name:"Yoruba",native:"Yorùbá",region:"Nigeria"},{code:"zh",name:"Chinese",native:"中文",region:"China"},{code:"zu",name:"Zulu",native:"isiZulu",region:"South Africa"}];class r{constructor(e,t={}){n(this,"config"),n(this,"translationService"),n(this,"currentLanguage"),n(this,"widget"),n(this,"elements"),n(this,"autoDetectLanguage"),n(this,"isTranslated",!1),n(this,"isTranslating",!1),this.config={...a,...t},this.translationService=new i(e),this.autoDetectLanguage=this.config.autoDetectLanguage||!1,this.currentLanguage=this.config.pageLanguage,this.widget=document.createElement("div"),this.elements={trigger:null,dropdown:null,searchInput:null,clearSearch:null,languageItems:null,loadingIndicator:null},this.initialize()}initialize(){this.validateConfig()&&(this.autoDetectLanguage,this.createWidget(),this.setupEventListeners())}validateConfig(){return!!this.translationService||(console.error("Translation service is required to initialize the translation widget"),!1)}createWidget(){var e;const n=this.getCurrentLanguageLabel();this.widget.className="translate-widget",this.widget.innerHTML=this.createWidgetHTML(n),document.body.appendChild(this.widget),this.elements={trigger:this.widget.querySelector(".widget-trigger"),dropdown:this.widget.querySelector(".widget-dropdown"),searchInput:this.widget.querySelector(".search-input"),clearSearch:this.widget.querySelector(".clear-search"),languageItems:this.widget.querySelectorAll(".language-item"),loadingIndicator:this.widget.querySelector(".loading-spinner")};const a=null==(e=this.elements.trigger)?void 0:e.querySelector("span");a&&a.classList.add("fade-in")}getCurrentLanguageLabel(){var e;return(null==(e=s.find((e=>e.code===this.currentLanguage)))?void 0:e.native)||"English"}createWidgetHTML(e){const n=this.createLanguageOptions(),a=s.length;return'<div class="translation-widget">\n    \x3c!-- Widget Trigger Button --\x3e\n    <div class="widget-trigger" tabindex="0" role="button" aria-label="Open translation menu" aria-expanded="false">\n        \x3c!-- Normal State --\x3e\n        <div class="trigger-content">\n            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-globe-icon lucide-globe"><circle cx="12" cy="12" r="10"/><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/><path d="M2 12h20"/></svg>\n            <span>Translate</span>\n        </div>\n        \n        \x3c!-- Loading State (hidden by default) --\x3e\n        <div class="trigger-loading" style="display: none;">\n            <div class="loading-spinner"></div>\n            <span>Translating...</span>\n        </div>\n    </div>\n\n    \x3c!-- Dropdown Menu --\x3e\n    <div class="widget-dropdown">\n        \x3c!-- Header --\x3e\n        <div class="dropdown-header">\n            <div class="dropdown-title">\n                <div class="title-left">\n                    <svg class="languages-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"></path>\n                    </svg>\n                    <span class="title-text">Select Language</span>\n                </div>\n                <div class="language-count">{{languageCount}} languages</div>\n            </div>\n            \n            \x3c!-- Search Input --\x3e\n            <div class="search-container">\n                <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>\n                </svg>\n                <input type="text" class="search-input" placeholder="Search languages..." aria-label="Search languages">\n                <svg class="clear-search" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>\n                </svg>\n            </div>\n        </div>\n\n        \x3c!-- Reset Option --\x3e\n        <div class="reset-option" tabindex="0" role="button" aria-label="Reset to original language">\n            <svg class="reset-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path>\n            </svg>\n            <div class="reset-text">\n                <span class="reset-title">Original Language</span>\n                <span class="reset-subtitle">Reset translation</span>\n            </div>\n        </div>\n\n        \x3c!-- Language List --\x3e\n        <div class="language-list">\n            {{languageOptions}}\n            <div class="no-results" style="display: none;">\n                <svg class="no-results-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>\n                </svg>\n                <span>No languages found</span>\n            </div>\n        </div>\n    </div>\n</div>'.replace("{{languageOptions}}",n).replace("{{currentLanguageLabel}}",e).replace("{{languageCount}}",a.toString())}createLanguageOptions(){const e=this.currentLanguage,n=s.find((n=>n.code===e)),a=s.filter((n=>n.code!==e)).sort(((e,n)=>e.native.localeCompare(n.native)));if(!n)return"";const t=(e,n=!1)=>`\n            <div class="language-item ${n?"selected":""}" tabindex="0" role="option" aria-selected="${n}" data-language-code="${e.code}">\n                <div class="language-info">\n                    <div class="language-main">\n                        <span class="language-name">${e.name}</span>\n                        <div class="language-code">${e.code}</div>\n                    </div>\n                    <div class="language-details">\n                        <span class="language-native">${e.native}</span>\n                        <span class="language-separator">•</span>\n                        <span class="language-region">${e.region}</span>\n                    </div>\n                </div>\n                <svg class="check-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>\n                </svg>\n            </div>\n        `;return`\n            ${t(n,!0)}\n            ${a.map((e=>t(e))).join("")}\n        `}async updateTriggerText(e){var n;const a=null==(n=this.elements.trigger)?void 0:n.querySelector("span");a&&(a.offsetHeight,a.classList.remove("fade-in"),a.classList.add("fade-out"),await new Promise((e=>setTimeout(e,300))),a.textContent=e,a.offsetHeight,a.classList.remove("fade-out"),a.classList.add("fade-in"))}setTranslatingState(e){this.isTranslating=e;const n=this.elements.trigger,a=this.elements.dropdown,t=this.widget.querySelectorAll(".language-item"),i=this.widget.querySelector(".reset-option"),o=this.elements.searchInput;n&&(n.style.pointerEvents=e?"none":"auto",n.style.opacity=e?"0.7":"1"),a&&(a.style.pointerEvents=e?"none":"auto"),o&&(o.disabled=e),t.forEach((n=>{n.style.pointerEvents=e?"none":"auto",n.style.opacity=e?"0.7":"1"})),i&&(i.style.pointerEvents=e?"none":"auto",i.style.opacity=e?"0.7":"1")}async translatePage(e){this.setTranslatingState(!0);try{const n=o.findTranslatableContent(),a=o.divideIntoGroups(n,10),t=[],i=[];a.forEach((n=>{const a=[],o=[];n.forEach((n=>{if(n.nodeType!==Node.TEXT_NODE)return;const t=n.parentElement;if(!t)return;const i=this.getTextToTranslate(n,t,e);i&&(a.push(i),o.push(n))})),t.push(o),i.push(a)}));(await Promise.all(i.map((n=>this.translationService.translateBatchText(n,e))))).forEach(((e,n)=>{e.forEach(((e,a)=>{const i=t[n][a];i.nodeType===Node.TEXT_NODE&&(i.textContent=e)}))})),this.isTranslated=!0,this.updateResetButtonVisibility()}finally{this.setTranslatingState(!1)}}getTextToTranslate(e,n,a){var t,i;if(n.hasAttribute("data-original-text")){const t=null==(i=e.textContent)?void 0:i.trim();return"en"!==this.currentLanguage&&"en"!==a?n.getAttribute("data-original-text"):t||null}{const a=null==(t=e.textContent)?void 0:t.trim();if(a)return n.setAttribute("data-original-text",a),a}return null}updateResetButtonVisibility(){const e=this.widget.querySelector(".reset-option");e&&(e.style.display=this.isTranslated?"flex":"none")}setupEventListeners(){const{trigger:e,dropdown:n,searchInput:a,clearSearch:t,languageItems:i}=this.elements;if(!(e&&n&&a&&t&&i))return void console.error("Failed to find required elements");const o=this.widget.querySelector(".reset-option");o&&o.addEventListener("click",(()=>{if(this.isTranslating)return;this.translationService.resetTranslations(),o.classList.remove("active"),this.isTranslated=!1,this.updateResetButtonVisibility();this.widget.querySelectorAll(".language-item").forEach((e=>{const n=e.getAttribute("data-language-code")===this.config.pageLanguage;e.classList.toggle("selected",n),e.setAttribute("aria-selected",n.toString())}));const a=s.find((e=>e.code===this.config.pageLanguage));a&&this.updateTriggerText(a.name),n.classList.remove("open"),e.setAttribute("aria-expanded","false")})),this.updateResetButtonVisibility(),e.addEventListener("click",(()=>{if(this.isTranslating)return;n.classList.toggle("open");const t=n.classList.contains("open");e.setAttribute("aria-expanded",t.toString()),t&&a.focus()})),document.addEventListener("click",(a=>{a.target.closest(".translation-widget")||n.classList.contains("open")&&(n.classList.add("closing"),setTimeout((()=>{n.classList.remove("open","closing"),e.setAttribute("aria-expanded","false")}),300))})),a.addEventListener("input",(()=>{const e=a.value.toLowerCase(),n=e.length>0;t.classList.toggle("visible",n);const i=this.widget.querySelectorAll(".language-item"),o=this.widget.querySelector(".no-results");let s=0;i.forEach((n=>{var a,t,i,o,r,l,c,d;const g=(null==(t=null==(a=n.querySelector(".language-name"))?void 0:a.textContent)?void 0:t.toLowerCase())||"",u=(null==(o=null==(i=n.querySelector(".language-native"))?void 0:i.textContent)?void 0:o.toLowerCase())||"",h=(null==(l=null==(r=n.querySelector(".language-code"))?void 0:r.textContent)?void 0:l.toLowerCase())||"",v=(null==(d=null==(c=n.querySelector(".language-region"))?void 0:c.textContent)?void 0:d.toLowerCase())||"",m=g.includes(e)||u.includes(e)||h.includes(e)||v.includes(e);n.style.display=m?"":"none",m&&s++})),o&&(o.style.display=0===s?"flex":"none")})),t.addEventListener("click",(()=>{a.value="",t.classList.remove("visible"),a.focus();const e=this.widget.querySelectorAll(".language-item"),n=this.widget.querySelector(".no-results");e.forEach((e=>{e.style.display=""})),n&&(n.style.display="none")})),i.forEach((a=>{a.addEventListener("click",(async()=>{var t;if(this.isTranslating)return;i.forEach((e=>{e.classList.remove("selected"),e.setAttribute("aria-selected","false")})),a.classList.add("selected"),a.setAttribute("aria-selected","true");const o=null==(t=a.querySelector(".language-name"))?void 0:t.textContent,s=a.getAttribute("data-language-code");if(o&&await this.updateTriggerText(o),n.classList.remove("open"),e.setAttribute("aria-expanded","false"),s&&s!==this.currentLanguage){const n=e.querySelector(".trigger-content"),a=e.querySelector(".trigger-loading");n&&a&&(n.style.display="none",a.style.display="flex");try{await this.translatePage(s),this.currentLanguage=s}catch(r){console.error("Translation error:",r),alert("An error occurred during translation. Please try again.")}finally{n&&a&&(a.style.display="none",n.style.display="flex")}}}))})),document.addEventListener("keydown",(a=>{n.classList.contains("open")&&"Escape"===a.key&&(n.classList.remove("open"),e.setAttribute("aria-expanded","false"),e.focus())}))}}return(e,n)=>{if("undefined"==typeof window)throw new Error("Translation widget can only be used in browser environment");return new r(e,n)}}));
//# sourceMappingURL=index.min.js.map
